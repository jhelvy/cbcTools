<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Computing D-error in Choice Experiments â€¢ cbcTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="â€image/svg+xmlâ€" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Computing D-error in Choice Experiments">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cbcTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/profiles.html">Generating Profiles</a></li>
    <li><a class="dropdown-item" href="../articles/priors.html">Specifying Priors</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Generating Designs</a></li>
    <li><a class="dropdown-item" href="../articles/d_error.html">Computing D-Error</a></li>
    <li><a class="dropdown-item" href="../articles/choices.html">Simulating Choices</a></li>
    <li><a class="dropdown-item" href="../articles/power.html">Power Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jhelvy/cbcTools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Computing D-error in Choice Experiments</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/cbcTools/blob/main/vignettes/d_error.Rmd" class="external-link"><code>vignettes/d_error.Rmd</code></a></small>
      <div class="d-none name"><code>d_error.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-d-error">What is D-error?<a class="anchor" aria-label="anchor" href="#what-is-d-error"></a>
</h2>
<p>D-error is a measure of how good or bad a design is at extracting
information from respondents in a choice experiment. A design with a
<strong>low D-error</strong> is better than a design with a <strong>high
D-error</strong>, provided that both designs are for the same
experiment. Comparing D-error between designs for different experiments
is meaningless.</p>
<p>When generating designs using D-optimal methods in
<code><a href="../reference/cbc_design.html">cbc_design()</a></code>, several of the methods
(<code>"stochastic"</code>, <code>"modfed"</code>, <code>"cea"</code>)
use an algorithm that minimizes D-error to find efficient experimental
designs. The specific type of D-error computed depends on the prior
assumptions you provide.</p>
<blockquote>
<p>Note: A â€œD-optimalâ€ design is not necessarily the best design for
your experiment. These designs optimize information about the â€œmain
effectsâ€ of interest, at the expence of information about interactions.
If you feel interactions may be important, consider using a different
design method or consider including interactions in your priors.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="types-of-d-error">Types of D-error<a class="anchor" aria-label="anchor" href="#types-of-d-error"></a>
</h2>
<div class="section level3">
<h3 id="prior-parameter-assumptions">Prior Parameter Assumptions<a class="anchor" aria-label="anchor" href="#prior-parameter-assumptions"></a>
</h3>
<p>When computing D-error, a prior assumption about the respondent
parameters needs to be made:</p>
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mn>0</mn></msub><annotation encoding="application/x-tex">D_0</annotation></semantics></math>-error
assumes that all parameters are zero â€” i.e., respondents have no
preference for any of the attribute levels</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error
assumes that all respondent parameters are equal to a fixed parameter
vector<br>
</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>B</mi></msub><annotation encoding="application/x-tex">D_B</annotation></semantics></math>-error
assumes that respondent parameters are distributed according to a
probability distribution (typically multivariate normal)</li>
</ul>
</div>
<div class="section level3">
<h3 id="how-cbctools-chooses-d-error-type">How cbcTools Chooses D-error Type<a class="anchor" aria-label="anchor" href="#how-cbctools-chooses-d-error-type"></a>
</h3>
<p>In <code><a href="../reference/cbc_design.html">cbc_design()</a></code> with D-optimal methods
(<code>"stochastic"</code>, <code>"modfed"</code>, <code>"cea"</code>),
the type of D-error minimized depends on your prior specifications:</p>
<ol style="list-style-type: decimal">
<li>
<strong>No priors provided</strong> (<code>priors = NULL</code>) â†’
Uses
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mn>0</mn></msub><annotation encoding="application/x-tex">D_0</annotation></semantics></math>-error</li>
<li>
<strong>Fixed parameters</strong> (using <code><a href="../reference/cbc_priors.html">cbc_priors()</a></code>
with fixed values) â†’ Uses
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error</li>
<li>
<strong>Random parameters</strong> (using <code><a href="../reference/cbc_priors.html">cbc_priors()</a></code>
with <code><a href="../reference/rand_spec.html">rand_spec()</a></code>) â†’ Uses
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>B</mi></msub><annotation encoding="application/x-tex">D_B</annotation></semantics></math>-error</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="working-example">Working Example<a class="anchor" aria-label="anchor" href="#working-example"></a>
</h2>
<p>Letâ€™s work through the mathematical steps of D-error computation
using the same example from the literature.</p>
<div class="section level3">
<h3 id="the-design">The Design<a class="anchor" aria-label="anchor" href="#the-design"></a>
</h3>
<p>Consider this simple 3-attribute, 2-alternative choice
experiment:</p>
<table class="table">
<colgroup>
<col width="11%">
<col width="7%">
<col width="12%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th>Version</th>
<th>Task</th>
<th>Question</th>
<th>Alternative</th>
<th>Attribute 1</th>
<th>Attribute 2</th>
<th>Attribute 3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="even">
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>1</td>
<td>3</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td>1</td>
<td>3</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="step-1-encode-the-design">Step 1: Encode the Design<a class="anchor" aria-label="anchor" href="#step-1-encode-the-design"></a>
</h3>
<p>The first step is to encode the design using dummy coding. For each
2-level attribute, we create one dummy variable (comparing level 2
vs.Â level 1 as reference). This gives us:</p>
<p><strong>Question 1:</strong>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">X_1 = \begin{pmatrix}
0 &amp; 1 &amp; 0 \\
1 &amp; 0 &amp; 1
\end{pmatrix}</annotation></semantics></math></p>
<p><strong>Question 2:</strong>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>2</mn></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">X_2 = \begin{pmatrix}
0 &amp; 1 &amp; 1 \\
1 &amp; 0 &amp; 0
\end{pmatrix}</annotation></semantics></math></p>
<p><strong>Question 3:</strong>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>3</mn></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">X_3 = \begin{pmatrix}
1 &amp; 1 &amp; 0 \\
0 &amp; 0 &amp; 1
\end{pmatrix}</annotation></semantics></math></p>
</div>
</div>
<div class="section level2">
<h2 id="computing-d_p-error-fixed-parameters">Computing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error
(Fixed Parameters)<a class="anchor" aria-label="anchor" href="#computing-d_p-error-fixed-parameters"></a>
</h2>
<p>For
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error,
we assume specific parameter values:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›ƒ</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0.5</mn><mo>,</mo><mo>âˆ’</mo><mn>0.5</mn><mo>,</mo><mn>0.8</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{\beta} = [0.5, -0.5, 0.8]</annotation></semantics></math>.</p>
<div class="section level3">
<h3 id="step-2-compute-choice-probabilities">Step 2: Compute Choice Probabilities<a class="anchor" aria-label="anchor" href="#step-2-compute-choice-probabilities"></a>
</h3>
<p>Using the multinomial logit formula:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mi>q</mi></mrow></msub><mo>=</mo><mfrac><mrow><mo>exp</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mi>i</mi><mi>q</mi></mrow></msub><mi>ğ›ƒ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>J</mi></munderover><mo>exp</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mi>j</mi><mi>q</mi></mrow></msub><mi>ğ›ƒ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">P_{iq} = \frac{\exp(X_{iq} \boldsymbol{\beta})}{\sum_{j=1}^{J} \exp(X_{jq} \boldsymbol{\beta})}</annotation></semantics></math></p>
<p>For Question 1: - Utility Alt1:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mn>1</mn></msub><mo>=</mo><mn>0</mn><mo>Ã—</mo><mn>0.5</mn><mo>+</mo><mn>1</mn><mo>Ã—</mo><mrow><mo stretchy="true" form="prefix">(</mo><mo>âˆ’</mo><mn>0.5</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mn>0</mn><mo>Ã—</mo><mn>0.8</mn><mo>=</mo><mo>âˆ’</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">U_1 = 0 \times 0.5 + 1 \times (-0.5) + 0 \times 0.8 = -0.5</annotation></semantics></math>
- Utility Alt2:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mn>2</mn></msub><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>0.5</mn><mo>+</mo><mn>0</mn><mo>Ã—</mo><mrow><mo stretchy="true" form="prefix">(</mo><mo>âˆ’</mo><mn>0.5</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mn>1</mn><mo>Ã—</mo><mn>0.8</mn><mo>=</mo><mn>1.3</mn></mrow><annotation encoding="application/x-tex">U_2 = 1 \times 0.5 + 0 \times (-0.5) + 1 \times 0.8 = 1.3</annotation></semantics></math>
-
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>11</mn></msub><mo>=</mo><mfrac><msup><mi>e</mi><mrow><mo>âˆ’</mo><mn>0.5</mn></mrow></msup><mrow><msup><mi>e</mi><mrow><mo>âˆ’</mo><mn>0.5</mn></mrow></msup><mo>+</mo><msup><mi>e</mi><mn>1.3</mn></msup></mrow></mfrac><mo>=</mo><mn>0.143</mn></mrow><annotation encoding="application/x-tex">P_{11} = \frac{e^{-0.5}}{e^{-0.5} + e^{1.3}} = 0.143</annotation></semantics></math>
-
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>21</mn></msub><mo>=</mo><mfrac><msup><mi>e</mi><mn>1.3</mn></msup><mrow><msup><mi>e</mi><mrow><mo>âˆ’</mo><mn>0.5</mn></mrow></msup><mo>+</mo><msup><mi>e</mi><mn>1.3</mn></msup></mrow></mfrac><mo>=</mo><mn>0.857</mn></mrow><annotation encoding="application/x-tex">P_{21} = \frac{e^{1.3}}{e^{-0.5} + e^{1.3}} = 0.857</annotation></semantics></math></p>
<p>Similar calculations for Questions 2 and 3 give us the choice
probabilities for each alternative in each question.</p>
</div>
<div class="section level3">
<h3 id="step-3-compute-fisher-information-matrix">Step 3: Compute Fisher Information Matrix<a class="anchor" aria-label="anchor" href="#step-3-compute-fisher-information-matrix"></a>
</h3>
<p>The Fisher information matrix for each choice set uses the
formula:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>q</mi></msub><mo>=</mo><msubsup><mi>X</mi><mi>q</mi><mi>T</mi></msubsup><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">diag</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>ğ</mi><mi>ğª</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>âˆ’</mo><msub><mi>ğ</mi><mi>ğª</mi></msub><msup><msub><mi>ğ</mi><mi>ğª</mi></msub><mi>T</mi></msup><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>X</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">I_q = X_q^T \left( \text{diag}(\mathbf{P_q}) - \mathbf{P_q} \mathbf{P_q}^T \right) X_q</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ğ</mi><mi>ğª</mi></msub><annotation encoding="application/x-tex">\mathbf{P_q}</annotation></semantics></math>
is the vector of choice probabilities for choice set
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>q</mi><annotation encoding="application/x-tex">q</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">diag</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>ğ</mi><mi>ğª</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{diag}(\mathbf{P_q})</annotation></semantics></math>
creates a diagonal matrix from this vector.</p>
<p>The total information matrix is:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>q</mi><mo>=</mo><mn>1</mn></mrow><mi>Q</mi></munderover><msub><mi>I</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">I = \sum_{q=1}^{Q} I_q</annotation></semantics></math></p>
</div>
<div class="section level3">
<h3 id="step-4-compute-d_p-error">Step 4: Compute
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error<a class="anchor" aria-label="anchor" href="#step-4-compute-d_p-error"></a>
</h3>
<p>The
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error
is calculated as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>p</mi></msub><mtext mathvariant="normal">-error</mtext><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mo>det</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>I</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo>âˆ’</mo><mn>1</mn><mi>/</mi><mi>K</mi></mrow></msup></mrow><annotation encoding="application/x-tex">D_p\text{-error} = (\det(I))^{-1/K}</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">K = 3</annotation></semantics></math>
is the number of parameters.</p>
</div>
</div>
<div class="section level2">
<h2 id="computing-d_0-error-no-priors">Computing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mn>0</mn></msub><annotation encoding="application/x-tex">D_0</annotation></semantics></math>-error
(No Priors)<a class="anchor" aria-label="anchor" href="#computing-d_0-error-no-priors"></a>
</h2>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mn>0</mn></msub><annotation encoding="application/x-tex">D_0</annotation></semantics></math>-error
is a special case where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›ƒ</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>0</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{\beta} = [0, 0, 0]</annotation></semantics></math>,
making all alternatives equally likely.</p>
<p>When all parameters are zero: - All utilities = 0 - All choice
probabilities =
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><mn>1</mn><mi>J</mi></mfrac><annotation encoding="application/x-tex">\frac{1}{J}</annotation></semantics></math>
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>J</mi><annotation encoding="application/x-tex">J</annotation></semantics></math>
is the number of alternatives</p>
<p>For our 2-alternative case:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mi>q</mi></mrow></msub><mo>=</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">P_{iq} = 0.5</annotation></semantics></math>
for all alternatives.</p>
<p>The information matrix calculation follows the same formula, but with
equal probabilities. This simplifies the calculation considerably
since:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">diag</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>ğ</mi><mi>ğª</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>âˆ’</mo><msub><mi>ğ</mi><mi>ğª</mi></msub><msup><msub><mi>ğ</mi><mi>ğª</mi></msub><mi>T</mi></msup><mo>=</mo><mtext mathvariant="normal">diag</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>0.5</mn><mo>,</mo><mn>0.5</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo>âˆ’</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd><mtd columnalign="center" style="text-align: center"><mo>âˆ’</mo><mn>0.25</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mo>âˆ’</mo><mn>0.25</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.25</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{diag}(\mathbf{P_q}) - \mathbf{P_q} \mathbf{P_q}^T = \text{diag}(0.5, 0.5) - \begin{pmatrix} 0.25 &amp; 0.25 \\ 0.25 &amp; 0.25 \end{pmatrix} = \begin{pmatrix} 0.25 &amp; -0.25 \\ -0.25 &amp; 0.25 \end{pmatrix}</annotation></semantics></math></p>
</div>
<div class="section level2">
<h2 id="computing-d_b-error-random-parameters">Computing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>B</mi></msub><annotation encoding="application/x-tex">D_B</annotation></semantics></math>-error
(Random Parameters)<a class="anchor" aria-label="anchor" href="#computing-d_b-error-random-parameters"></a>
</h2>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>B</mi></msub><annotation encoding="application/x-tex">D_B</annotation></semantics></math>-error
assumes parameters follow a probability distribution. For example, if we
assume:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ğ›ƒ</mi><mo>âˆ¼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0.5</mn><mo>,</mo><mo>âˆ’</mo><mn>0.5</mn><mo>,</mo><mn>0.8</mn><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><mtext mathvariant="normal">diag</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">[</mo><msup><mn>0.5</mn><mn>2</mn></msup><mo>,</mo><msup><mn>0.5</mn><mn>2</mn></msup><mo>,</mo><msup><mn>0.5</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{\beta} \sim N\left([0.5, -0.5, 0.8], \text{diag}([0.5^2, 0.5^2, 0.5^2])\right)</annotation></semantics></math></p>
<p>The computation involves:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Draw parameter samples</strong> from the distribution (e.g.,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">R = 1000</annotation></semantics></math>
draws)</li>
<li>
<strong>Compute
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error</strong>
for each parameter draw
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>ğ›ƒ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msup><annotation encoding="application/x-tex">\boldsymbol{\beta}^{(r)}</annotation></semantics></math>
</li>
<li>
<strong>Average the results</strong> to get
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>B</mi></msub><annotation encoding="application/x-tex">D_B</annotation></semantics></math>-error</li>
</ol>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>B</mi></msub><mtext mathvariant="normal">-error</mtext><mo>=</mo><mfrac><mn>1</mn><mi>R</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>r</mi><mo>=</mo><mn>1</mn></mrow><mi>R</mi></munderover><msub><mi>D</mi><mi>p</mi></msub><mtext mathvariant="normal">-error</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msup><mi>ğ›ƒ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">D_B\text{-error} = \frac{1}{R} \sum_{r=1}^{R} D_p\text{-error}(\boldsymbol{\beta}^{(r)})</annotation></semantics></math></p>
<table class="table">
<thead><tr class="header">
<th>Draw</th>
<th>Parameter 1</th>
<th>Parameter 2</th>
<th>Parameter 3</th>
<th>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0.25</td>
<td>-0.73</td>
<td>0.67</td>
<td>1.45</td>
</tr>
<tr class="even">
<td>2</td>
<td>1.14</td>
<td>-0.67</td>
<td>0.67</td>
<td>1.90</td>
</tr>
<tr class="odd">
<td>3</td>
<td>0.69</td>
<td>-0.50</td>
<td>1.23</td>
<td>1.92</td>
</tr>
<tr class="even">
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
</tr>
<tr class="odd">
<td>1000</td>
<td>1.15</td>
<td>-1.67</td>
<td>0.57</td>
<td>2.82</td>
</tr>
</tbody>
</table>
<p><strong><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>B</mi></msub><annotation encoding="application/x-tex">D_B</annotation></semantics></math>-error
= mean of all
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-errors
= 1.90</strong></p>
<hr>
<blockquote>
<p>Note: The example used in this article is inspired by <a href="https://www.displayr.com/how-to-compute-d-error-for-a-choice-experiment/" class="external-link">this
article</a> on displayr.com.</p>
</blockquote>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Helveston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
