<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generating Designs • cbcTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generating Designs">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cbcTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/profiles.html">Generating Profiles</a></li>
    <li><a class="dropdown-item" href="../articles/priors.html">Specifying Priors</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Generating Designs</a></li>
    <li><a class="dropdown-item" href="../articles/d_error.html">Computing D-Error</a></li>
    <li><a class="dropdown-item" href="../articles/choices.html">Simulating Choices</a></li>
    <li><a class="dropdown-item" href="../articles/power.html">Power Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jhelvy/cbcTools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generating Designs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/cbcTools/blob/main/vignettes/design.Rmd" class="external-link"><code>vignettes/design.Rmd</code></a></small>
      <div class="d-none name"><code>design.Rmd</code></div>
    </div>

    
    
<p>Once you have a set of profiles and (optionally) priors, you can
generate a choice-based conjoint (CBC) survey design using the
<code><a href="../reference/cbc_design.html">cbc_design()</a></code> function. This article covers all the design
methods available, their features, and how to customize designs for
specific research needs.</p>
<p>Before starting, let’s define some basic profiles and priors to work
with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhelvy/cbcTools" class="external-link">cbcTools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">2.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Fuji'</span>, <span class="st">'Gala'</span>, <span class="st">'Honeycrisp'</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">priors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_priors.html">cbc_priors</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  price <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Gala'</span> <span class="op">=</span> <span class="fl">0.5</span>, <span class="st">'Honeycrisp'</span> <span class="op">=</span> <span class="fl">1.0</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Average'</span> <span class="op">=</span> <span class="fl">0.6</span>, <span class="st">'Excellent'</span> <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="design-basics">Design Basics<a class="anchor" aria-label="anchor" href="#design-basics"></a>
</h2>
<p>The <code><a href="../reference/cbc_design.html">cbc_design()</a></code> function generates a data frame with an
encoded experiment design formatted as one row per alternative. Choice
questions are defined by sets of rows with the same <code>obsID</code>.
Let’s start with a simple example (a random design):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>, <span class="co"># Alternatives per question</span></span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Questions per respondent</span></span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span> <span class="co"># Number of respondents</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design</span></span>
<span><span class="co">#&gt; Design method: random</span></span>
<span><span class="co">#&gt; Structure: 100 respondents × 6 questions × 2 alternatives</span></span>
<span><span class="co">#&gt; Profile usage: 45/45 (100.0%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 💡 Use cbc_inspect() for a more detailed summary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First few rows of design:</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price typeGala typeHoneycrisp</span></span>
<span><span class="co">#&gt; 1        31      1   1     1     1   1.0        0              0</span></span>
<span><span class="co">#&gt; 2        15      1   1     2     1   3.0        0              1</span></span>
<span><span class="co">#&gt; 3        14      1   2     1     2   2.5        0              1</span></span>
<span><span class="co">#&gt; 4         3      1   2     2     2   2.0        0              0</span></span>
<span><span class="co">#&gt; 5        42      1   3     1     3   1.5        0              1</span></span>
<span><span class="co">#&gt; 6        43      1   3     2     3   2.0        0              1</span></span>
<span><span class="co">#&gt;   freshnessAverage freshnessExcellent</span></span>
<span><span class="co">#&gt; 1                0                  1</span></span>
<span><span class="co">#&gt; 2                0                  0</span></span>
<span><span class="co">#&gt; 3                0                  0</span></span>
<span><span class="co">#&gt; 4                0                  0</span></span>
<span><span class="co">#&gt; 5                0                  1</span></span>
<span><span class="co">#&gt; 6                0                  1</span></span>
<span><span class="co">#&gt; ... and 1194 more rows</span></span></code></pre></div>
<div class="section level3">
<h3 id="understanding-the-design-structure">Understanding the Design Structure<a class="anchor" aria-label="anchor" href="#understanding-the-design-structure"></a>
</h3>
<p>The design data frame contains several types of columns that help
organize the experiment:</p>
<div class="section level4">
<h4 id="id-columns">ID Columns<a class="anchor" aria-label="anchor" href="#id-columns"></a>
</h4>
<p>These columns identify the structure of your experiment:</p>
<ul>
<li>
<strong><code>profileID</code></strong>: Unique identifier for each
profile (combination of attribute levels), that corresponds to the IDs
in <code>profiles</code>
</li>
<li>
<strong><code>respID</code></strong>: Respondent ID (1 to
<code>n_resp</code>)</li>
<li>
<strong><code>qID</code></strong>: Question number within each
respondent (1 to <code>n_q</code>)</li>
<li>
<strong><code>altID</code></strong>: Alternative number within each
question (1 to <code>n_alts</code>)</li>
<li>
<strong><code>obsID</code></strong>: Unique identifier for each
choice question across all respondents</li>
</ul>
</div>
<div class="section level4">
<h4 id="attribute-columns">Attribute Columns<a class="anchor" aria-label="anchor" href="#attribute-columns"></a>
</h4>
<p>The remaining columns represent your experimental attributes. By
default, categorical attributes are <strong>dummy-coded</strong>. In
dummy coding, <strong>continuous attributes</strong> (like
<code>price</code>) appear as-is, but <strong>categorical
attributes</strong> (like <code>type</code> and <code>freshness</code>)
are split into multiple binary columns.</p>
<p>For example, for <code>type</code>, we have the following
columns:</p>
<ul>
<li>
<code>typeGala</code> = 1 if type is “Gala”, 0 otherwise</li>
<li>
<code>typeHoneycrisp</code> = 1 if type is “Honeycrisp”, 0
otherwise</li>
</ul>
<p>Here the reference level (“Fuji”) is represented when both dummy
variables equal 0.</p>
</div>
<div class="section level4">
<h4 id="converting-to-categorical-format">Converting to Categorical Format<a class="anchor" aria-label="anchor" href="#converting-to-categorical-format"></a>
</h4>
<p>If you prefer to see categorical variables in their original format,
use <code><a href="../reference/cbc_decode.html">cbc_decode()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_decoded</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_decode.html">cbc_decode</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="va">design_decoded</span></span>
<span><span class="co">#&gt; Design method: random</span></span>
<span><span class="co">#&gt; Structure: 100 respondents × 6 questions × 2 alternatives</span></span>
<span><span class="co">#&gt; Profile usage: 45/45 (100.0%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 💡 Use cbc_inspect() for a more detailed summary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First few rows of design:</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        31      1   1     1     1   1.0       Fuji Excellent</span></span>
<span><span class="co">#&gt; 2        15      1   1     2     1   3.0 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 3        14      1   2     1     2   2.5 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 4         3      1   2     2     2   2.0       Fuji      Poor</span></span>
<span><span class="co">#&gt; 5        42      1   3     1     3   1.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 6        43      1   3     2     3   2.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; ... and 1194 more rows</span></span></code></pre></div>
<p>The decoded version shows:</p>
<ul>
<li>
<code>type</code> as a categorical variable with levels “Fuji”,
“Gala”, “Honeycrisp”</li>
<li>
<code>freshness</code> as a categorical variable with levels “Poor”,
“Average”, “Excellent”</li>
<li>
<code>price</code> remains unchanged (continuous variables don’t
need decoding)</li>
</ul>
<p>Both forms of the design (dummy-coded and categorical) are convenient
for different purposes, though they are otherwise equivalent.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="design-methods">Design Methods<a class="anchor" aria-label="anchor" href="#design-methods"></a>
</h2>
<p>The <code><a href="../reference/cbc_design.html">cbc_design()</a></code> function supports several design
generation methods, each with different strengths and use cases:</p>
<div class="section level3">
<h3 id="method-comparison-table">Method Comparison Table<a class="anchor" aria-label="anchor" href="#method-comparison-table"></a>
</h3>
<table class="table">
<colgroup>
<col width="15%">
<col width="7%">
<col width="13%">
<col width="12%">
<col width="9%">
<col width="15%">
<col width="10%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Method</th>
<th>Speed</th>
<th>Efficiency</th>
<th>No Choice</th>
<th>Labeled</th>
<th>Restrictions</th>
<th>Blocking</th>
<th>Interactions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"random"</code></td>
<td>Fast</td>
<td>Low</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
<td>✓</td>
</tr>
<tr class="even">
<td><code>"shortcut"</code></td>
<td>Fast</td>
<td>Medium</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
<td>✗</td>
</tr>
<tr class="odd">
<td><code>"minoverlap"</code></td>
<td>Fast</td>
<td>Medium</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
<td>✗</td>
</tr>
<tr class="even">
<td><code>"balanced"</code></td>
<td>Fast</td>
<td>Medium</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
<td>✗</td>
</tr>
<tr class="odd">
<td><code>"stochastic"</code></td>
<td>Slow</td>
<td>High</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="even">
<td><code>"modfed"</code></td>
<td>Medium</td>
<td>High</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="odd">
<td><code>"cea"</code></td>
<td>Medium</td>
<td>High</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
<td>✓</td>
<td>✓</td>
</tr>
</tbody>
</table>
<p>All design methods ensure:</p>
<ol style="list-style-type: decimal">
<li>
<strong>No duplicate profiles</strong> within any choice set</li>
<li>
<strong>No duplicate choice sets</strong> within any respondent</li>
<li>
<strong>Dominance removal</strong> (if enabled) eliminates choice
sets with dominant alternatives (requires priors)</li>
</ol>
</div>
<div class="section level3">
<h3 id="random-method">
<code>"random"</code> Method<a class="anchor" aria-label="anchor" href="#random-method"></a>
</h3>
<p>The <code>"random"</code> method is the default and creates designs
by randomly sampling profiles for each respondent independently. This
ensures maximum diversity but may be less statistically efficient.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_random</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Quick inspection</span></span>
<span><span class="fu"><a href="../reference/cbc_inspect.html">cbc_inspect</a></span><span class="op">(</span><span class="va">design_random</span>, sections <span class="op">=</span> <span class="st">"structure"</span><span class="op">)</span></span>
<span><span class="co">#&gt; DESIGN SUMMARY</span></span>
<span><span class="co">#&gt; =========================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; STRUCTURE</span></span>
<span><span class="co">#&gt; ================</span></span>
<span><span class="co">#&gt; Method: random</span></span>
<span><span class="co">#&gt; Created: 2025-07-18 19:39:38</span></span>
<span><span class="co">#&gt; Respondents: 100</span></span>
<span><span class="co">#&gt; Questions per respondent: 6</span></span>
<span><span class="co">#&gt; Alternatives per question: 2</span></span>
<span><span class="co">#&gt; Total choice sets: 600</span></span>
<span><span class="co">#&gt; Profile usage: 45/45 (100.0%)</span></span></code></pre></div>
<p><strong>When to use:</strong></p>
<ul>
<li>Large sample sizes where efficiency matters less</li>
<li>Want maximum diversity across respondents</li>
<li>No strong prior assumptions about parameters</li>
<li>Uncertain whether interactions might be important</li>
<li>Quick prototyping or testing</li>
</ul>
</div>
<div class="section level3">
<h3 id="frequency-based-methods">Frequency-Based Methods<a class="anchor" aria-label="anchor" href="#frequency-based-methods"></a>
</h3>
<p>The <code>"shortcut"</code>, <code>"minoverlap"</code>, and
<code>"balanced"</code> methods use greedy algorithms to balance
attribute level frequencies and minimize overlap. While they prioritize
different metrics, they often can result in similar solutions. Each
method has a different objective:</p>
<ul>
<li>The <code>"shortcut"</code> method balances attribute level
frequencies while avoiding duplicate profiles within questions.</li>
<li>The <code>"minoverlap"</code> method prioritizes minimizing
attribute overlap within choice questions.</li>
<li>The <code>"balanced"</code> method optimizes both frequency balance
and pairwise attribute interactions.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_shortcut</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"shortcut"</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_minoverlap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"minoverlap"</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_balanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"balanced"</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="d-optimal-methods">D-Optimal Methods<a class="anchor" aria-label="anchor" href="#d-optimal-methods"></a>
</h3>
<p>These methods minimize D-error to create statistically efficient
designs. They require more computation but produce higher-quality
designs, especially with good priors.</p>
<p>Unlike the previous methods, these methods identify a single
d-optimal design and then repeat that design across each respondent. In
contrast, the other methods create a unique design for each
respondent.</p>
<p>Each method has a different approach:</p>
<ul>
<li>The <code>"stochastic"</code> method uses random profile swapping to
minimize the d-error, accepting the first improvement found. This is a
faster algorithm as a compromise between speed and exhaustiveness.</li>
<li>The <code>"modfed"</code> (Modified Fedorov) method exhaustively
tests all possible profile swaps for each position. It is slower than
other methods though more thorough.</li>
<li>The <code>"cea"</code> (Coordinate Exchange Algorithm) method
optimizes attribute-by-attribute, testing all possible levels for each
attribute. It is faster than <code>"modfed"</code>, though requires all
possible profiles and cannot accept restricted profile sets.</li>
</ul>
<p>For the <code>"modfed"</code> and <code>"cea"</code> methods, designs
are by default created using the much faster algorithms in the <a href="https://github.com/traets/idefix" class="external-link">{idefix}</a> package. You can
use the (slower) {cbcTools} versions of these methods by setting
<code>use_idefix = FALSE</code>.</p>
<p>For the examples below, we have <code>n_start = 1</code>, meaning it
will only run one design search (which is faster), but you may want to
run a longer search by increasing <code>n_start</code>. The best design
across all starts is chosen.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_stochastic</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>,</span>
<span>  n_start <span class="op">=</span> <span class="fl">1</span> <span class="co"># Number of random starting points</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_modfed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"modfed"</span>,</span>
<span>  n_start <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_cea</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cea"</span>,</span>
<span>  n_start <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Notice also that in the examples above we provided the
<code>priors</code> to each design. This will optimize the design around
these assumed priors by minimizing the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>p</mi></msub><annotation encoding="application/x-tex">D_p</annotation></semantics></math>-error.
If you are uncertain what the true parameters are, you can omit the
<code>priors</code> argument and the algorithms will minimize the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mn>0</mn></msub><annotation encoding="application/x-tex">D_0</annotation></semantics></math>-error.
See the <a href="d_error.html">Computing D-error</a> page for more
details on how these errors are computed.</p>
</div>
</div>
<div class="section level2">
<h2 id="comparing-designs">Comparing Designs<a class="anchor" aria-label="anchor" href="#comparing-designs"></a>
</h2>
<p>You can compare the results of different designs using the
<code><a href="../reference/cbc_compare.html">cbc_compare()</a></code> function. This provides a comprehensive
overview of differences in structure as well as common metrics such as
D-error, overlap, and balance.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cbc_compare.html">cbc_compare</a></span><span class="op">(</span></span>
<span>  <span class="st">"Random"</span> <span class="op">=</span> <span class="va">design_random</span>,</span>
<span>  <span class="st">"Shortcut"</span> <span class="op">=</span> <span class="va">design_shortcut</span>,</span>
<span>  <span class="st">"Min Overlap"</span> <span class="op">=</span> <span class="va">design_minoverlap</span>,</span>
<span>  <span class="st">"Balanced"</span> <span class="op">=</span> <span class="va">design_balanced</span>,</span>
<span>  <span class="st">"Stochastic"</span> <span class="op">=</span> <span class="va">design_stochastic</span>,</span>
<span>  <span class="st">"Modfed"</span> <span class="op">=</span> <span class="va">design_modfed</span>,</span>
<span>  <span class="st">"CEA"</span> <span class="op">=</span> <span class="va">design_cea</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; CBC Design Comparison</span></span>
<span><span class="co">#&gt; =====================</span></span>
<span><span class="co">#&gt; Designs compared: 7</span></span>
<span><span class="co">#&gt; Metrics: structure, efficiency, balance, overlap</span></span>
<span><span class="co">#&gt; Sorted by: d_error (ascending)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Structure</span></span>
<span><span class="co">#&gt; =====================</span></span>
<span><span class="co">#&gt;       Design     Method respondents questions</span></span>
<span><span class="co">#&gt;       Modfed     modfed         100         6</span></span>
<span><span class="co">#&gt;          CEA        cea         100         6</span></span>
<span><span class="co">#&gt;   Stochastic stochastic         100         6</span></span>
<span><span class="co">#&gt;       Random     random         100         6</span></span>
<span><span class="co">#&gt;     Shortcut   shortcut         100         6</span></span>
<span><span class="co">#&gt;  Min Overlap minoverlap         100         6</span></span>
<span><span class="co">#&gt;     Balanced   balanced         100         6</span></span>
<span><span class="co">#&gt;  Alternatives Blocks Profile Usage</span></span>
<span><span class="co">#&gt;             2      1 (10/45) 22.2%</span></span>
<span><span class="co">#&gt;             2      1 (11/45) 24.4%</span></span>
<span><span class="co">#&gt;             2      1 (12/45) 26.7%</span></span>
<span><span class="co">#&gt;             2      1  (45/45) 100%</span></span>
<span><span class="co">#&gt;             2      1  (45/45) 100%</span></span>
<span><span class="co">#&gt;             2      1  (45/45) 100%</span></span>
<span><span class="co">#&gt;             2      1  (45/45) 100%</span></span>
<span><span class="co">#&gt;  No Choice Labeled?</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt;         No       No</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Design Metrics</span></span>
<span><span class="co">#&gt; =====================</span></span>
<span><span class="co">#&gt;       Design     Method D-Error (Null) D-Error (Prior) Balance Overlap</span></span>
<span><span class="co">#&gt;       Modfed     modfed       0.850283        1.023292   0.744   0.267</span></span>
<span><span class="co">#&gt;          CEA        cea       0.858174        1.043690   0.777   0.233</span></span>
<span><span class="co">#&gt;   Stochastic stochastic       1.203841        1.485359   0.686   0.300</span></span>
<span><span class="co">#&gt;       Random     random             NA              NA   0.739   0.477</span></span>
<span><span class="co">#&gt;     Shortcut   shortcut             NA              NA   0.739   0.267</span></span>
<span><span class="co">#&gt;  Min Overlap minoverlap             NA              NA   0.736   0.267</span></span>
<span><span class="co">#&gt;     Balanced   balanced             NA              NA   0.736   0.268</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Interpretation:</span></span>
<span><span class="co">#&gt; - D-Error: Lower is better (design efficiency)</span></span>
<span><span class="co">#&gt; - Balance: Higher is better (level distribution)</span></span>
<span><span class="co">#&gt; - Overlap: Lower is better (attribute variation)</span></span>
<span><span class="co">#&gt; - Profile Usage: Higher means more profiles used</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Best performers:</span></span>
<span><span class="co">#&gt; - D-Error: Modfed (1.023292)</span></span>
<span><span class="co">#&gt; - Balance: CEA (0.777)</span></span>
<span><span class="co">#&gt; - Overlap: CEA (0.233)</span></span>
<span><span class="co">#&gt; - Profile Usage: Random (100.0%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Use summary() for detailed information on any one design.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="design-features">Design Features<a class="anchor" aria-label="anchor" href="#design-features"></a>
</h2>
<div class="section level3">
<h3 id="no-choice-option">No-Choice Option<a class="anchor" aria-label="anchor" href="#no-choice-option"></a>
</h3>
<p>Add a “no-choice” alternative to allow respondents to opt out by
including the argument <code>no_choice = TRUE</code>. If you are using
priors in your design (optional), then you must also provide a
<code>no_choice</code> value in your priors:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For D-optimal methods, must include no_choice in priors</span></span>
<span><span class="va">priors_nochoice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_priors.html">cbc_priors</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  price <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  no_choice <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span> <span class="co"># Negative value makes no-choice less attractive</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_nochoice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  no_choice <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors_nochoice</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_nochoice</span><span class="op">)</span></span>
<span><span class="co">#&gt; Design method: stochastic</span></span>
<span><span class="co">#&gt; Structure: 100 respondents × 6 questions × 2 alternatives</span></span>
<span><span class="co">#&gt; Profile usage: 9/45 (20.0%)</span></span>
<span><span class="co">#&gt; D-error: 0.835553</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 💡 Use cbc_inspect() for a more detailed summary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First few rows of design:</span></span>
<span><span class="co">#&gt;   profileID blockID respID qID altID obsID price typeGala typeHoneycrisp</span></span>
<span><span class="co">#&gt; 1        22       1      1   1     1     1   1.5        1              0</span></span>
<span><span class="co">#&gt; 2        14       1      1   1     2     1   2.5        0              1</span></span>
<span><span class="co">#&gt; 3         0       1      1   1     3     1   0.0        0              0</span></span>
<span><span class="co">#&gt; 4        19       1      1   2     1     2   2.5        0              0</span></span>
<span><span class="co">#&gt; 5        43       1      1   2     2     2   2.0        0              1</span></span>
<span><span class="co">#&gt; 6         0       1      1   2     3     2   0.0        0              0</span></span>
<span><span class="co">#&gt;   freshnessAverage freshnessExcellent no_choice</span></span>
<span><span class="co">#&gt; 1                1                  0         0</span></span>
<span><span class="co">#&gt; 2                0                  0         0</span></span>
<span><span class="co">#&gt; 3                0                  0         1</span></span>
<span><span class="co">#&gt; 4                1                  0         0</span></span>
<span><span class="co">#&gt; 5                0                  1         0</span></span>
<span><span class="co">#&gt; 6                0                  0         1</span></span></code></pre></div>
<blockquote>
<p>Note: Designs with no-choice options must be dummy-coded and cannot
be converted back to categorical format.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="labeled-designs">Labeled Designs<a class="anchor" aria-label="anchor" href="#labeled-designs"></a>
</h3>
<p>Create “labeled” or “alternative-specific” designs where one
attribute serves as a label using the <code>label</code> argument:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Will be overridden to match number of type levels</span></span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"type"</span>, <span class="co"># Use 'type' attribute as labels</span></span>
<span>  method <span class="op">=</span> <span class="st">"random"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_labeled</span><span class="op">)</span></span>
<span><span class="co">#&gt; Design method: random</span></span>
<span><span class="co">#&gt; Structure: 100 respondents × 6 questions × 3 alternatives</span></span>
<span><span class="co">#&gt; Profile usage: 45/45 (100.0%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 💡 Use cbc_inspect() for a more detailed summary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First few rows of design:</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price typeGala typeHoneycrisp</span></span>
<span><span class="co">#&gt; 1        20      1   1     1     1   3.0        0              0</span></span>
<span><span class="co">#&gt; 2        21      1   1     2     1   1.0        1              0</span></span>
<span><span class="co">#&gt; 3        14      1   1     3     1   2.5        0              1</span></span>
<span><span class="co">#&gt; 4         5      1   2     1     2   3.0        0              0</span></span>
<span><span class="co">#&gt; 5        38      1   2     2     2   2.0        1              0</span></span>
<span><span class="co">#&gt; 6        44      1   2     3     2   2.5        0              1</span></span>
<span><span class="co">#&gt;   freshnessAverage freshnessExcellent</span></span>
<span><span class="co">#&gt; 1                1                  0</span></span>
<span><span class="co">#&gt; 2                1                  0</span></span>
<span><span class="co">#&gt; 3                0                  0</span></span>
<span><span class="co">#&gt; 4                0                  0</span></span>
<span><span class="co">#&gt; 5                0                  1</span></span>
<span><span class="co">#&gt; 6                0                  1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="blocking">Blocking<a class="anchor" aria-label="anchor" href="#blocking"></a>
</h3>
<p>For D-optimal methods, create multiple design blocks to reduce
respondent burden using the <code>n_blocks</code> argument. In the
example below, two blocks are created with each block containing
<code>n_q = 6</code> questions:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_blocked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  n_blocks <span class="op">=</span> <span class="fl">2</span> <span class="co"># Create 2 different design blocks</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check block allocation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">design_blocked</span><span class="op">$</span><span class="va">blockID</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   1   2 </span></span>
<span><span class="co">#&gt; 600 600</span></span></code></pre></div>
<p>The way blocking works is that a single design is created with
<code>n_q*n_blocks</code> questions, then those questions are allocated
into blocks with <code>n_q</code> questions per block. For the
<code>"modfed"</code> and <code>"cea"</code> methods, the blocking is
handled using the internal logic of the <a href="https://github.com/traets/idefix" class="external-link">{idefix}</a> package, which
allocates questions to the blocks in a balanced way. You can use the
(slower) {cbcTools} versions of these methods by setting
<code>use_idefix = FALSE</code>. For the <code>"stochastic"</code>
method, questions are randomly allocated to blocks.</p>
</div>
<div class="section level3">
<h3 id="dominance-removal">Dominance Removal<a class="anchor" aria-label="anchor" href="#dominance-removal"></a>
</h3>
<p>Remove choice sets where one alternative dominates others based on
parameter preferences. There are two forms of dominance removal:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Total dominance</strong>: Occurs when one alternative has
such a high predicted choice probability (based on the prior
coefficients) that it would be chosen by virtually all respondents. This
creates choice sets with little information value since the outcome is
predetermined. The <code>dominance_threshold</code> parameter controls
this - alternatives with choice probabilities above this threshold
(e.g., 0.8 = 80%) are considered dominant.</li>
<li>
<strong>Partial dominance</strong>: Occurs when one alternative is
superior to all others across every individual attribute component of
the utility function (again, based on prior coefficients). For example,
if Alternative A has higher partial utilities than Alternative B for
every single attribute (price, type, freshness), then A partially
dominates B regardless of the overall choice probability. This type of
dominance is detected by comparing the attribute-level contributions to
utility.</li>
</ol>
<p>Both forms of dominance create unrealistic choice scenarios that
provide less information about respondent preferences, so removing them
generally improves design quality.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_no_dominance</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>  remove_dominant <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dominance_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span>, <span class="st">"partial"</span><span class="op">)</span>,</span>
<span>  dominance_threshold <span class="op">=</span> <span class="fl">0.8</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interactions">Interactions<a class="anchor" aria-label="anchor" href="#interactions"></a>
</h3>
<p>Include interaction effects in D-optimal designs by specifying them
in your prior model. Interactions capture how the effect of one
attribute depends on the level of another attribute. The design
optimization then accounts for these interaction terms when minimizing
D-error.</p>
<p>Interactions are specified via the priors defined by
<code><a href="../reference/cbc_priors.html">cbc_priors()</a></code>. For example:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create priors with interactions</span></span>
<span><span class="va">priors_interactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_priors.html">cbc_priors</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  price <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fuji"</span> <span class="op">=</span> <span class="fl">0.5</span>, <span class="st">"Gala"</span> <span class="op">=</span> <span class="fl">1.0</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>  interactions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Price is less negative (less price sensitive) for Fuji apples</span></span>
<span>    <span class="fu"><a href="../reference/int_spec.html">int_spec</a></span><span class="op">(</span></span>
<span>      between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span><span class="op">)</span>,</span>
<span>      with_level <span class="op">=</span> <span class="st">"Fuji"</span>,</span>
<span>      value <span class="op">=</span> <span class="fl">0.5</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="co"># Price is slightly less negative for Gala apples</span></span>
<span>    <span class="fu"><a href="../reference/int_spec.html">int_spec</a></span><span class="op">(</span></span>
<span>      between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span><span class="op">)</span>,</span>
<span>      with_level <span class="op">=</span> <span class="st">"Gala"</span>,</span>
<span>      value <span class="op">=</span> <span class="fl">0.2</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="co"># Honeycrisp uses reference level (no additional interaction term)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_interactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors_interactions</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>When you include interactions in the prior model, the design
optimization:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Accounts for interaction parameters</strong> when computing
choice probabilities</li>
<li>
<strong>Optimizes profile combinations</strong> that provide
information about both main effects AND interactions</li>
<li>
<strong>Creates choice sets</strong> that help distinguish between
different interaction effects</li>
</ol>
<p>This leads to more efficient designs when interaction effects truly
exist in your population, but can reduce efficiency for estimating main
effects if interactions are misspecified or don’t actually exist.</p>
<p>See the <a href="priors.html">Specifying Priors</a> article for more
details and options on defining priors with interactions.</p>
</div>
</div>
<div class="section level2">
<h2 id="comprehensive-design-inspection">Comprehensive Design Inspection<a class="anchor" aria-label="anchor" href="#comprehensive-design-inspection"></a>
</h2>
<p>Use <code><a href="../reference/cbc_inspect.html">cbc_inspect()</a></code> for detailed design analysis:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Detailed inspection of the stochastic design</span></span>
<span><span class="fu"><a href="../reference/cbc_inspect.html">cbc_inspect</a></span><span class="op">(</span></span>
<span>  <span class="va">design_stochastic</span>,</span>
<span>  sections <span class="op">=</span> <span class="st">"all"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; DESIGN SUMMARY</span></span>
<span><span class="co">#&gt; =========================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; STRUCTURE</span></span>
<span><span class="co">#&gt; ================</span></span>
<span><span class="co">#&gt; Method: stochastic</span></span>
<span><span class="co">#&gt; Created: 2025-07-18 19:39:50</span></span>
<span><span class="co">#&gt; Respondents: 100</span></span>
<span><span class="co">#&gt; Questions per respondent: 6</span></span>
<span><span class="co">#&gt; Alternatives per question: 2</span></span>
<span><span class="co">#&gt; Total choice sets: 600</span></span>
<span><span class="co">#&gt; Profile usage: 12/45 (26.7%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SUMMARY METRICS</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; D-error (with priors): 1.485359</span></span>
<span><span class="co">#&gt; D-error (null model): 1.203841</span></span>
<span><span class="co">#&gt; (Lower values indicate more efficient designs)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Overall balance score: 0.686 (higher is better)</span></span>
<span><span class="co">#&gt; Overall overlap score: 0.300 (lower is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; VARIABLE ENCODING</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; Format: Dummy-coded (type, freshness)</span></span>
<span><span class="co">#&gt; 💡 Use cbc_decode_design() to convert to categorical format</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ATTRIBUTE BALANCE</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; Overall balance score: 0.686 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Individual attribute level counts:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   1 1.5   2 2.5   3 </span></span>
<span><span class="co">#&gt; 300 200 200 400 100 </span></span>
<span><span class="co">#&gt;   Balance score: 0.678 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeGala:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   0   1 </span></span>
<span><span class="co">#&gt; 800 400 </span></span>
<span><span class="co">#&gt;   Balance score: 0.680 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeHoneycrisp:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   0   1 </span></span>
<span><span class="co">#&gt; 900 300 </span></span>
<span><span class="co">#&gt;   Balance score: 0.586 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessAverage:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   0   1 </span></span>
<span><span class="co">#&gt; 700 500 </span></span>
<span><span class="co">#&gt;   Balance score: 0.809 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessExcellent:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   0   1 </span></span>
<span><span class="co">#&gt; 800 400 </span></span>
<span><span class="co">#&gt;   Balance score: 0.680 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ATTRIBUTE OVERLAP</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; Overall overlap score: 0.300 (lower is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Counts of attribute overlap:</span></span>
<span><span class="co">#&gt; (# of questions with N unique levels)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  16.7%  (100 / 600 questions)</span></span>
<span><span class="co">#&gt;   2 (partial overlap):   83.3%  (500 / 600 questions)</span></span>
<span><span class="co">#&gt;   3 (partial overlap):    0.0%  (0 / 600 questions)</span></span>
<span><span class="co">#&gt;   4 (partial overlap):    0.0%  (0 / 600 questions)</span></span>
<span><span class="co">#&gt;   5 (no overlap):         0.0%  (0 / 600 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.83</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeGala: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  33.3%  (200 / 600 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        66.7%  (400 / 600 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.67</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeHoneycrisp: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  50.0%  (300 / 600 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        50.0%  (300 / 600 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.50</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessAverage: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  16.7%  (100 / 600 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        83.3%  (500 / 600 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.83</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessExcellent: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  33.3%  (200 / 600 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        66.7%  (400 / 600 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.67</span></span></code></pre></div>
<div class="section level3">
<h3 id="customizing-optimization">Customizing Optimization<a class="anchor" aria-label="anchor" href="#customizing-optimization"></a>
</h3>
<p>The <code><a href="../reference/cbc_design.html">cbc_design()</a></code> function offers many customization
options:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Advanced stochastic design with custom settings</span></span>
<span><span class="va">design_advanced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_alts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_q <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  n_blocks <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>  n_start <span class="op">=</span> <span class="fl">10</span>, <span class="co"># More starting points for better optimization</span></span>
<span>  max_iter <span class="op">=</span> <span class="fl">100</span>, <span class="co"># More iterations per start</span></span>
<span>  n_cores <span class="op">=</span> <span class="fl">4</span>, <span class="co"># Parallel processing</span></span>
<span>  remove_dominant <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dominance_threshold <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  randomize_questions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  randomize_alts <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>After generating your design:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Inspect the design</strong> using <code><a href="../reference/cbc_inspect.html">cbc_inspect()</a></code>
to understand its properties</li>
<li>
<strong>Simulate choices</strong> using <code><a href="../reference/cbc_choices.html">cbc_choices()</a></code>
to test the design</li>
<li>
<strong>Conduct power analysis</strong> using
<code><a href="../reference/cbc_power.html">cbc_power()</a></code> to determine sample size requirements</li>
<li>
<strong>Compare alternatives</strong> using
<code><a href="../reference/cbc_compare.html">cbc_compare()</a></code> to choose the best design</li>
</ol>
<p>For more details on these next steps, see:</p>
<ul>
<li>The <a href="choices.html">Simulating Choices</a> vignette</li>
<li>The <a href="power.html">Power Analysis</a> vignette</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Helveston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
