<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started • cbcTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cbcTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/profiles.html">Generating Profiles</a></li>
    <li><a class="dropdown-item" href="../articles/priors.html">Specifying Priors</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Generating Designs</a></li>
    <li><a class="dropdown-item" href="../articles/d_error.html">Computing D-Error</a></li>
    <li><a class="dropdown-item" href="../articles/choices.html">Simulating Choices</a></li>
    <li><a class="dropdown-item" href="../articles/power.html">Power Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jhelvy/cbcTools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/cbcTools/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><strong>cbcTools</strong> provides a complete toolkit for designing
and analyzing choice-based conjoint (CBC) experiments. This article
walks through the entire workflow from defining attributes to creating
and inspecting designs and determining sample size requirements,
providing a quick start guide for new users and an overview of the
package’s capabilities. Other articles cover more details on each
step.</p>
<div class="section level2">
<h2 id="the-cbctools-workflow">The cbcTools Workflow<a class="anchor" aria-label="anchor" href="#the-cbctools-workflow"></a>
</h2>
<p>The package supports a step-by-step process for developing choice
experiment designs:</p>
<center>
<img src="https://jhelvy.github.io/cbcTools/reference/figures/flowchart.png" alt="Workflow diagram showing the six-step cbcTools process: Generate Profiles (cbc_profiles) -&gt; Create Priors (cbc_priors) -&gt; Generate Design (cbc_design) -&gt; Inspect Design (cbc_inspect) -&gt; Simulate Choices (cbc_choices) -&gt; Assess Power (cbc_power)" width="100%">
</center>
<p>Each step uses functions that begin with <code>cbc_</code> and builds
on the previous step:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Generate Profiles</strong> → <code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code> -
Define attributes and levels</li>
<li>
<strong>Specify Priors</strong> → <code><a href="../reference/cbc_priors.html">cbc_priors()</a></code> -
Specify prior preference assumptions (optional)</li>
<li>
<strong>Generate Designs</strong> → <code><a href="../reference/cbc_design.html">cbc_design()</a></code> -
Create choice question design</li>
<li>
<strong>Inspect Designs</strong> → <code><a href="../reference/cbc_inspect.html">cbc_inspect()</a></code> -
Evaluate design quality</li>
<li>
<strong>Simulate Choices</strong> → <code><a href="../reference/cbc_choices.html">cbc_choices()</a></code> -
Generate realistic choice data</li>
<li>
<strong>Assess Power</strong> → <code><a href="../reference/cbc_power.html">cbc_power()</a></code> - Determine
sample size requirements</li>
</ol>
<p>Let’s walk through each step with a complete example. Imagine we’re
designing a choice experiment to understand consumer preferences for
apples. We want to study how <strong>price</strong>,
<strong>type</strong>, and <strong>freshness</strong> influence purchase
decisions.</p>
<div class="section level3">
<h3 id="step-1-generate-profiles">Step 1: Generate Profiles<a class="anchor" aria-label="anchor" href="#step-1-generate-profiles"></a>
</h3>
<p>Start by defining the attributes and levels for your experiment:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0</span>, <span class="fl">1.5</span>, <span class="fl">2.0</span>, <span class="fl">2.5</span>, <span class="fl">3.0</span><span class="op">)</span>, <span class="co"># Price per pound ($)</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Fuji'</span>, <span class="st">'Gala'</span>, <span class="st">'Honeycrisp'</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">profiles</span></span>
<span><span class="co">#&gt; CBC Profiles</span></span>
<span><span class="co">#&gt; ============</span></span>
<span><span class="co">#&gt; price       : Continuous (5 levels, range: 1.00-3.00)</span></span>
<span><span class="co">#&gt; type        : Categorical (3 levels: Fuji, Gala, Honeycrisp)</span></span>
<span><span class="co">#&gt; freshness   : Categorical (3 levels: Poor, Average, Excellent)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Profiles: 45</span></span>
<span><span class="co">#&gt; First few rows:</span></span>
<span><span class="co">#&gt;   profileID price type freshness</span></span>
<span><span class="co">#&gt; 1         1   1.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 2         2   1.5 Fuji      Poor</span></span>
<span><span class="co">#&gt; 3         3   2.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 4         4   2.5 Fuji      Poor</span></span>
<span><span class="co">#&gt; 5         5   3.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 6         6   1.0 Gala      Poor</span></span>
<span><span class="co">#&gt; ... and 39 more rows</span></span></code></pre></div>
<p>This creates all possible combinations of attribute levels - our
“universe” of possible products to include in choice questions.</p>
<p>See the <a href="profiles.html">Generating Profiles</a> article for
more details and options on defining profiles, such as including
restrictions.</p>
</div>
<div class="section level3">
<h3 id="step-2-specify-priors">Step 2: Specify Priors<a class="anchor" aria-label="anchor" href="#step-2-specify-priors"></a>
</h3>
<p>Specify your assumptions about consumer preferences based on theory,
literature, or pilot studies. These can be used for generating designs
that incorporate these expected preferences as well as simulating
choices for a given design.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">priors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_priors.html">cbc_priors</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  price <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span>, <span class="co"># Negative = people prefer lower prices</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># Gala and Honeycrisp preferred over Fuji (reference)</span></span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">1.2</span><span class="op">)</span> <span class="co"># Average and Excellent preferred over Poor (reference)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">priors</span></span>
<span><span class="co">#&gt; CBC Prior Specifications:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt;   Continuous variable</span></span>
<span><span class="co">#&gt;   Levels: 1, 1.5, 2, 2.5, 3 </span></span>
<span><span class="co">#&gt;   Fixed parameter</span></span>
<span><span class="co">#&gt;     Coefficient: -0.25</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type:</span></span>
<span><span class="co">#&gt;   Categorical variable</span></span>
<span><span class="co">#&gt;   Levels: Fuji, Gala, Honeycrisp </span></span>
<span><span class="co">#&gt;   Reference level: Fuji</span></span>
<span><span class="co">#&gt;   Fixed parameter</span></span>
<span><span class="co">#&gt;     Gala: 0.5</span></span>
<span><span class="co">#&gt;     Honeycrisp: 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshness:</span></span>
<span><span class="co">#&gt;   Categorical variable</span></span>
<span><span class="co">#&gt;   Levels: Poor, Average, Excellent </span></span>
<span><span class="co">#&gt;   Reference level: Poor</span></span>
<span><span class="co">#&gt;   Fixed parameter</span></span>
<span><span class="co">#&gt;     Average: 0.6</span></span>
<span><span class="co">#&gt;     Excellent: 1.2</span></span></code></pre></div>
<div class="section level4">
<h4 id="understanding-reference-levels">Understanding Reference Levels<a class="anchor" aria-label="anchor" href="#understanding-reference-levels"></a>
</h4>
<p>For categorical attributes, <strong>the reference level is set by the
first level defined in <code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code></strong>, which in
this case is <code>"Fuji"</code> for <strong>Type</strong> and
<code>"Poor"</code> for <strong>Freshness</strong>. This would imply the
following for the above set of priors:</p>
<ul>
<li>
<strong>Type</strong>: Fuji (reference), Gala (+0.5), Honeycrisp
(+1.0)</li>
<li>
<strong>Freshness</strong>: Poor (reference), Average (+0.6),
Excellent (+1.2)</li>
</ul>
<p>See the <a href="priors.html">Specifying Priors</a> article for more
details and options on defining priors.</p>
</div>
</div>
<div class="section level3">
<h3 id="step-3-generate-designs">Step 3: Generate Designs<a class="anchor" aria-label="anchor" href="#step-3-generate-designs"></a>
</h3>
<p>Create the set of choice questions that respondents will see. By
default, all categorical variables are dummy-coded in the resulting
design (you can convert the design back to categorical formatting with
<code><a href="../reference/cbc_decode.html">cbc_decode()</a></code>):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"stochastic"</span>, <span class="co"># D-optimal method</span></span>
<span>  n_alts <span class="op">=</span> <span class="fl">3</span>, <span class="co"># 2 alternatives per choice question</span></span>
<span>  n_q <span class="op">=</span> <span class="fl">6</span>, <span class="co"># 6 questions per respondent</span></span>
<span>  n_resp <span class="op">=</span> <span class="fl">300</span>, <span class="co"># 300 respondents</span></span>
<span>  priors <span class="op">=</span> <span class="va">priors</span> <span class="co"># Use our priors for optimization</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">design</span></span>
<span><span class="co">#&gt; Design method: stochastic</span></span>
<span><span class="co">#&gt; Structure: 300 respondents × 6 questions × 3 alternatives</span></span>
<span><span class="co">#&gt; Profile usage: 15/45 (33.3%)</span></span>
<span><span class="co">#&gt; D-error: 0.821569</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 💡 Use cbc_inspect() for a more detailed summary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First few rows of design:</span></span>
<span><span class="co">#&gt;   profileID blockID respID qID altID obsID price typeGala typeHoneycrisp</span></span>
<span><span class="co">#&gt; 1        11       1      1   1     1     1     1        0              1</span></span>
<span><span class="co">#&gt; 2        25       1      1   1     2     1     3        1              0</span></span>
<span><span class="co">#&gt; 3         5       1      1   1     3     1     3        0              0</span></span>
<span><span class="co">#&gt; 4        15       1      1   2     1     2     3        0              1</span></span>
<span><span class="co">#&gt; 5        40       1      1   2     2     2     3        1              0</span></span>
<span><span class="co">#&gt; 6        16       1      1   2     3     2     1        0              0</span></span>
<span><span class="co">#&gt;   freshnessAverage freshnessExcellent</span></span>
<span><span class="co">#&gt; 1                0                  0</span></span>
<span><span class="co">#&gt; 2                1                  0</span></span>
<span><span class="co">#&gt; 3                0                  0</span></span>
<span><span class="co">#&gt; 4                0                  0</span></span>
<span><span class="co">#&gt; 5                0                  1</span></span>
<span><span class="co">#&gt; 6                1                  0</span></span>
<span><span class="co">#&gt; ... and 5394 more rows</span></span></code></pre></div>
<p>The design generated is sufficient for a full survey for
<code>n_resp</code> respondents. <strong>cbcTools</strong> offers
several design methods, each with their own trade-offs:</p>
<ul>
<li>
<strong><code>"random"</code></strong>: Random profiles for each
respondent.</li>
<li>
<strong><code>"shortcut"</code></strong>: Frequency-balanced, often
results in minimal overlap within choice questions.</li>
<li>
<strong><code>"minoverlap"</code></strong>: Prioritizes minimizing
attribute overlap within choice questions.</li>
<li>
<strong><code>"balanced"</code></strong>: Optimizes both frequency
balance and pairwise attribute interactions.</li>
<li>
<strong><code>"stochastic"</code></strong>: Minimizes D-error by
randomly swapping profiles.</li>
<li>
<strong><code>"modfed"</code></strong>: Minimizes D-error by
swapping out all possible profiles (slower, more thorough).</li>
<li>
<strong><code>"cea"</code></strong>: Minimizes D-error by
attribute-by-attribute swapping.</li>
</ul>
<p>All design methods ensure:</p>
<ol style="list-style-type: decimal">
<li>
<strong>No duplicate profiles</strong> within any choice set.</li>
<li>
<strong>No duplicate choice sets</strong> within any
respondent.</li>
<li>
<strong>Dominance removal</strong> (if enabled) eliminates choice
sets with dominant alternatives.</li>
</ol>
<p>See the <a href="design.html">Generating Designs</a> article for more
details and options on generating experiment designs, such as including
“no choice” options, using labeled designs, removing dominant options,
and details about each design algorithm.</p>
</div>
<div class="section level3">
<h3 id="step-4-inspect-design">Step 4: Inspect Design<a class="anchor" aria-label="anchor" href="#step-4-inspect-design"></a>
</h3>
<p>Use the <code><a href="../reference/cbc_inspect.html">cbc_inspect()</a></code> function to evaluate the quality
and properties of your design. Key things to look for:</p>
<ul>
<li>
<strong>D-error</strong>: Lower values indicate more efficient
designs</li>
<li>
<strong>Balance</strong>: Higher scores indicate better attribute
level balance</li>
<li>
<strong>Overlap</strong>: Lower scores indicate less attribute
overlap within questions</li>
<li>
<strong>Profile usage</strong>: Higher percentages indicate better
use of available profiles</li>
</ul>
<p>See <a href="https://jhelvy.github.io/cbcTools/reference/cbc_inspect.html"><code>cbc_inspect</code></a>
for more details.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cbc_inspect.html">cbc_inspect</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="co">#&gt; DESIGN SUMMARY</span></span>
<span><span class="co">#&gt; =========================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; STRUCTURE</span></span>
<span><span class="co">#&gt; ================</span></span>
<span><span class="co">#&gt; Method: stochastic</span></span>
<span><span class="co">#&gt; Created: 2025-08-10 18:44:34</span></span>
<span><span class="co">#&gt; Respondents: 300</span></span>
<span><span class="co">#&gt; Questions per respondent: 6</span></span>
<span><span class="co">#&gt; Alternatives per question: 3</span></span>
<span><span class="co">#&gt; Total choice sets: 1800</span></span>
<span><span class="co">#&gt; Profile usage: 15/45 (33.3%)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SUMMARY METRICS</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; D-error (with priors): 0.821569</span></span>
<span><span class="co">#&gt; D-error (null model): 0.756224</span></span>
<span><span class="co">#&gt; (Lower values indicate more efficient designs)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Overall balance score: 0.610 (higher is better)</span></span>
<span><span class="co">#&gt; Overall overlap score: 0.100 (lower is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; VARIABLE ENCODING</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; Format: Dummy-coded (type, freshness)</span></span>
<span><span class="co">#&gt; 💡 Use cbc_decode_design() to convert to categorical format</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ATTRIBUTE BALANCE</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; Overall balance score: 0.610 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Individual attribute level counts:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1  1.5    2  2.5    3 </span></span>
<span><span class="co">#&gt; 1800  600  300  300 2400 </span></span>
<span><span class="co">#&gt;   Balance score: 0.529 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeGala:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1 </span></span>
<span><span class="co">#&gt; 3900 1500 </span></span>
<span><span class="co">#&gt;   Balance score: 0.614 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeHoneycrisp:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1 </span></span>
<span><span class="co">#&gt; 3900 1500 </span></span>
<span><span class="co">#&gt;   Balance score: 0.614 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessAverage:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1 </span></span>
<span><span class="co">#&gt; 3600 1800 </span></span>
<span><span class="co">#&gt;   Balance score: 0.680 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessExcellent:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1 </span></span>
<span><span class="co">#&gt; 3900 1500 </span></span>
<span><span class="co">#&gt;   Balance score: 0.614 (higher is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ATTRIBUTE OVERLAP</span></span>
<span><span class="co">#&gt; =================</span></span>
<span><span class="co">#&gt; Overall overlap score: 0.100 (lower is better)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Counts of attribute overlap:</span></span>
<span><span class="co">#&gt; (# of questions with N unique levels)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):   0.0%  (0 / 1800 questions)</span></span>
<span><span class="co">#&gt;   2 (partial overlap):   66.7%  (1200 / 1800 questions)</span></span>
<span><span class="co">#&gt;   3 (partial overlap):   33.3%  (600 / 1800 questions)</span></span>
<span><span class="co">#&gt;   4 (partial overlap):    0.0%  (0 / 1800 questions)</span></span>
<span><span class="co">#&gt;   5 (no overlap):         0.0%  (0 / 1800 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 2.33</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeGala: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  16.7%  (300 / 1800 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        83.3%  (1500 / 1800 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.83</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; typeHoneycrisp: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  16.7%  (300 / 1800 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        83.3%  (1500 / 1800 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.83</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessAverage: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):   0.0%  (0 / 1800 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):       100.0%  (1800 / 1800 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 2.00</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshnessExcellent: Continuous variable</span></span>
<span><span class="co">#&gt;   Questions by # unique levels:</span></span>
<span><span class="co">#&gt;   1 (complete overlap):  16.7%  (300 / 1800 questions)</span></span>
<span><span class="co">#&gt;   2 (no overlap):        83.3%  (1500 / 1800 questions)</span></span>
<span><span class="co">#&gt;   Average unique levels per question: 1.83</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-5-simulate-choices">Step 5: Simulate Choices<a class="anchor" aria-label="anchor" href="#step-5-simulate-choices"></a>
</h3>
<p>Generate realistic choice data to test your design with the
<code><a href="../reference/cbc_choices.html">cbc_choices()</a></code> function. By default, random choices are
made, but if you provide priors with the <code>priors</code> argument,
choices will be made according to the utility model defined by your
priors:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate choices using our priors</span></span>
<span><span class="va">choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span><span class="va">design</span>, priors <span class="op">=</span> <span class="va">priors</span><span class="op">)</span></span>
<span></span>
<span><span class="va">choices</span></span>
<span><span class="co">#&gt; CBC Choice Data</span></span>
<span><span class="co">#&gt; ===============</span></span>
<span><span class="co">#&gt; Observations: 1800 choice tasks</span></span>
<span><span class="co">#&gt; Alternatives per task: 3</span></span>
<span><span class="co">#&gt; Respondents: 300</span></span>
<span><span class="co">#&gt; Questions per respondent: 6</span></span>
<span><span class="co">#&gt; Total choices made: 1800</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simulation method: utility_based</span></span>
<span><span class="co">#&gt; Original design D-error: 0.821569</span></span>
<span><span class="co">#&gt; Priors: Used for utility-based simulation</span></span>
<span><span class="co">#&gt; Simulated at: 2025-08-10 18:44:35</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Choice rates by alternative:</span></span>
<span><span class="co">#&gt;   Alt 1: 31.6% (569 choices)</span></span>
<span><span class="co">#&gt;   Alt 2: 33.0% (594 choices)</span></span>
<span><span class="co">#&gt;   Alt 3: 35.4% (637 choices)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First few rows:</span></span>
<span><span class="co">#&gt;   profileID blockID respID qID altID obsID price typeGala typeHoneycrisp</span></span>
<span><span class="co">#&gt; 1        11       1      1   1     1     1     1        0              1</span></span>
<span><span class="co">#&gt; 2        25       1      1   1     2     1     3        1              0</span></span>
<span><span class="co">#&gt; 3         5       1      1   1     3     1     3        0              0</span></span>
<span><span class="co">#&gt; 4        15       1      1   2     1     2     3        0              1</span></span>
<span><span class="co">#&gt; 5        40       1      1   2     2     2     3        1              0</span></span>
<span><span class="co">#&gt; 6        16       1      1   2     3     2     1        0              0</span></span>
<span><span class="co">#&gt;   freshnessAverage freshnessExcellent choice</span></span>
<span><span class="co">#&gt; 1                0                  0      1</span></span>
<span><span class="co">#&gt; 2                1                  0      0</span></span>
<span><span class="co">#&gt; 3                0                  0      0</span></span>
<span><span class="co">#&gt; 4                0                  0      0</span></span>
<span><span class="co">#&gt; 5                0                  1      1</span></span>
<span><span class="co">#&gt; 6                1                  0      0</span></span>
<span><span class="co">#&gt; ... and 5394 more rows</span></span></code></pre></div>
<p>Taking a look at some quick summaries, you can see that the simulated
choice patterns align with our priors - lower prices, preferred apple
types, and better freshness should be chosen more often (not always for
all levels though as there is some level of randomness involved). To do
this, it’s often easier to work with the design with categorical coding
instead of dummy coding:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">choices_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_decode.html">cbc_decode</a></span><span class="op">(</span><span class="va">choices</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter for the chosen rows only</span></span>
<span><span class="va">choices_cat</span> <span class="op">&lt;-</span> <span class="va">choices_cat</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">choices_cat</span><span class="op">$</span><span class="va">choice</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Counts of choices made for each attribute level</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">choices_cat</span><span class="op">$</span><span class="va">price</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   1 1.5   2 2.5   3 </span></span>
<span><span class="co">#&gt; 587 214  44 214 741</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">choices_cat</span><span class="op">$</span><span class="va">type</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Fuji       Gala Honeycrisp </span></span>
<span><span class="co">#&gt;        625        487        688</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">choices_cat</span><span class="op">$</span><span class="va">freshness</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Poor   Average Excellent </span></span>
<span><span class="co">#&gt;       421       659       720</span></span></code></pre></div>
<p>See the <a href="choices.html">Simulating Choices</a> article for
more details and options on inspeciting and comparing different
experiment designs.</p>
</div>
<div class="section level3">
<h3 id="step-6-assess-power">Step 6: Assess Power<a class="anchor" aria-label="anchor" href="#step-6-assess-power"></a>
</h3>
<p>Determine if your sample size provides adequate statistical power.
The <code><a href="../reference/cbc_power.html">cbc_power()</a></code> function auto-determines the attributes in
your design and estimates multiple logit models using incrementally
increasing sample sizes to assess power:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span><span class="va">choices</span><span class="op">)</span></span>
<span><span class="va">power</span></span>
<span><span class="co">#&gt; CBC Power Analysis Results</span></span>
<span><span class="co">#&gt; ==========================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample sizes tested: 30 to 300 (10 breaks)</span></span>
<span><span class="co">#&gt; Significance level: 0.050</span></span>
<span><span class="co">#&gt; Parameters: price, typeGala, typeHoneycrisp, freshnessAverage, freshnessExcellent</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Power summary (probability of detecting true effect):</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n = 30:</span></span>
<span><span class="co">#&gt;   price       : Power = 0.980, SE = 0.1007</span></span>
<span><span class="co">#&gt;   typeGala    : Power = 0.640, SE = 0.2121</span></span>
<span><span class="co">#&gt;   typeHoneycrisp: Power = 0.982, SE = 0.2202</span></span>
<span><span class="co">#&gt;   freshnessAverage: Power = 0.994, SE = 0.2153</span></span>
<span><span class="co">#&gt;   freshnessExcellent: Power = 0.998, SE = 0.2402</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n = 90:</span></span>
<span><span class="co">#&gt;   price       : Power = 1.000, SE = 0.0568</span></span>
<span><span class="co">#&gt;   typeGala    : Power = 0.870, SE = 0.1215</span></span>
<span><span class="co">#&gt;   typeHoneycrisp: Power = 1.000, SE = 0.1253</span></span>
<span><span class="co">#&gt;   freshnessAverage: Power = 1.000, SE = 0.1234</span></span>
<span><span class="co">#&gt;   freshnessExcellent: Power = 1.000, SE = 0.1355</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n = 180:</span></span>
<span><span class="co">#&gt;   price       : Power = 1.000, SE = 0.0404</span></span>
<span><span class="co">#&gt;   typeGala    : Power = 1.000, SE = 0.0859</span></span>
<span><span class="co">#&gt;   typeHoneycrisp: Power = 1.000, SE = 0.0898</span></span>
<span><span class="co">#&gt;   freshnessAverage: Power = 1.000, SE = 0.0885</span></span>
<span><span class="co">#&gt;   freshnessExcellent: Power = 1.000, SE = 0.0960</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n = 240:</span></span>
<span><span class="co">#&gt;   price       : Power = 1.000, SE = 0.0349</span></span>
<span><span class="co">#&gt;   typeGala    : Power = 1.000, SE = 0.0747</span></span>
<span><span class="co">#&gt;   typeHoneycrisp: Power = 1.000, SE = 0.0778</span></span>
<span><span class="co">#&gt;   freshnessAverage: Power = 1.000, SE = 0.0771</span></span>
<span><span class="co">#&gt;   freshnessExcellent: Power = 1.000, SE = 0.0833</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n = 300:</span></span>
<span><span class="co">#&gt;   price       : Power = 1.000, SE = 0.0312</span></span>
<span><span class="co">#&gt;   typeGala    : Power = 1.000, SE = 0.0673</span></span>
<span><span class="co">#&gt;   typeHoneycrisp: Power = 1.000, SE = 0.0696</span></span>
<span><span class="co">#&gt;   freshnessAverage: Power = 1.000, SE = 0.0696</span></span>
<span><span class="co">#&gt;   freshnessExcellent: Power = 1.000, SE = 0.0755</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Use plot() to visualize power curves.</span></span>
<span><span class="co">#&gt; Use summary() for detailed power analysis.</span></span></code></pre></div>
<p>You can easily visualize the results as well using the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">power</span>, type <span class="op">=</span> <span class="st">"power"</span>, power_threshold <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-8-1.png" alt="Power analysis chart showing statistical power vs sample size for 5 parameters. A red dashed line marks 90% power threshold. Most parameters achieve adequate power by 100 respondents, though freshnessAverage and typeGala require larger sample sizes than price and other freshness/type parameters." width="700"></p>
<p>Finally, using the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function you can determine
the exact size required to identify each attribute:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">power</span>, power_threshold <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span><span class="co">#&gt; CBC Power Analysis Summary</span></span>
<span><span class="co">#&gt; ===========================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample size requirements for 90% power:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price          : n &gt;= 30 (achieves 98.0% power, SE = 0.1007)</span></span>
<span><span class="co">#&gt; typeGala       : n &gt;= 120 (achieves 99.6% power, SE = 0.1048)</span></span>
<span><span class="co">#&gt; typeHoneycrisp : n &gt;= 30 (achieves 98.2% power, SE = 0.2202)</span></span>
<span><span class="co">#&gt; freshnessAverage: n &gt;= 30 (achieves 99.4% power, SE = 0.2153)</span></span>
<span><span class="co">#&gt; freshnessExcellent: n &gt;= 30 (achieves 99.8% power, SE = 0.2402)</span></span></code></pre></div>
<p>See the <a href="power.html">Power</a> article for more details and
options on conducting power analyses to better understand your
experiment designs.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Helveston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
