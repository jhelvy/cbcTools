<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Usage • cbcTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic Usage">
<meta property="og:description" content="cbcTools">
<meta property="og:image" content="https://jhelvy.github.io/cbcTools/reference/figures/logo.png">
<meta property="og:image:alt" content="Logo for the cbcTools package">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@JohnHelveston">
<meta name="twitter:site" content="@JohnHelveston">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cbcTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/basic_usage.html">Basic Usage</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jhelvy/cbcTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="basic_usage_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic Usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/cbcTools/blob/HEAD/vignettes/basic_usage.Rmd" class="external-link"><code>vignettes/basic_usage.Rmd</code></a></small>
      <div class="hidden name"><code>basic_usage.Rmd</code></div>

    </div>

    
    
<p>This package provides a set of tools for designing surveys and conducting power analyses for choice-based conjoint survey experiments in R. Each function in the package begins with <code>cbc_</code> and supports a step in the following process for designing and analyzing surveys:</p>
<center>
<img src="https://jhelvy.github.io/cbcTools/reference/figures/program_diagram.png" width="100%">
</center>
<p>This guide walks through each step of this design process.</p>
<div class="section level2">
<h2 id="generate-profiles">Generate profiles<a class="anchor" aria-label="anchor" href="#generate-profiles"></a>
</h2>
<p>The first step in designing an experiment is to define the attributes and levels for your experiment and then generate all of the <code>profiles</code> of each possible combination of those attributes and levels. For example, let’s say you’re designing a conjoint experiment about apples and you want to include <code>price</code>, <code>type</code>, and <code>freshness</code> as attributes. You can obtain all of the possible profiles for these attributes using the <code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code> function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhelvy/cbcTools" class="external-link">cbcTools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">0.5</span><span class="op">)</span>, <span class="co"># $ per pound</span></span>
<span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Fuji'</span>, <span class="st">'Gala'</span>, <span class="st">'Honeycrisp'</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 63</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID price type freshness</span></span>
<span><span class="co">#&gt; 1         1   1.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 2         2   1.5 Fuji      Poor</span></span>
<span><span class="co">#&gt; 3         3   2.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 4         4   2.5 Fuji      Poor</span></span>
<span><span class="co">#&gt; 5         5   3.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 6         6   3.5 Fuji      Poor</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt;    profileID price       type freshness</span></span>
<span><span class="co">#&gt; 58        58   1.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 59        59   2.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 60        60   2.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 61        61   3.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 62        62   3.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 63        63   4.0 Honeycrisp Excellent</span></span></code></pre></div>
<p>Depending on the context of your survey, you may wish to eliminate or modify some profiles before designing your conjoint survey (e.g., some profile combinations may be illogical or unrealistic). <strong>WARNING: including hard constraints in your designs can substantially reduce the statistical power of your design, so use them cautiously and avoid them if possible</strong>.</p>
<p>If you do wish to set some levels conditional on those of other attributes, you can do so by setting each level of an attribute to a list that defines these constraints. In the example below, the <code>type</code> attribute has constraints such that only certain price levels will be shown for each level. In addition, for the <code>"Honeycrisp"</code> level, only two of the three <code>freshness</code> levels are included: <code>"Excellent"</code> and <code>"Average"</code>. Note that both the other attributes (<code>price</code> and <code>freshness</code>) should contain all of the possible levels. When these constraints you can see that there are only 30 profiles compared to 63 without constraints:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">2.5</span>, <span class="fl">3</span>, <span class="fl">3.5</span>, <span class="fl">4</span>, <span class="fl">4.5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Fuji"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2.5</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"Gala"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"Honeycrisp"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3</span>, <span class="fl">3.5</span>, <span class="fl">4</span>, <span class="fl">4.5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>        freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Average"</span>, <span class="st">"Excellent"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 30</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID price freshness type</span></span>
<span><span class="co">#&gt; 1         1   2.0      Poor Fuji</span></span>
<span><span class="co">#&gt; 2         2   2.5      Poor Fuji</span></span>
<span><span class="co">#&gt; 3         3   3.0      Poor Fuji</span></span>
<span><span class="co">#&gt; 4         4   2.0   Average Fuji</span></span>
<span><span class="co">#&gt; 5         5   2.5   Average Fuji</span></span>
<span><span class="co">#&gt; 6         6   3.0   Average Fuji</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt;    profileID price freshness       type</span></span>
<span><span class="co">#&gt; 25        25   2.5 Excellent Honeycrisp</span></span>
<span><span class="co">#&gt; 26        26   3.0 Excellent Honeycrisp</span></span>
<span><span class="co">#&gt; 27        27   3.5 Excellent Honeycrisp</span></span>
<span><span class="co">#&gt; 28        28   4.0 Excellent Honeycrisp</span></span>
<span><span class="co">#&gt; 29        29   4.5 Excellent Honeycrisp</span></span>
<span><span class="co">#&gt; 30        30   5.0 Excellent Honeycrisp</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generate-survey-designs">Generate survey designs<a class="anchor" aria-label="anchor" href="#generate-survey-designs"></a>
</h2>
<p>Once a set of profiles is obtained, a conjoint survey can then be generated using the <code><a href="../reference/cbc_design.html">cbc_design()</a></code> function. A variety of survey designs can be generated, including:</p>
<ul>
<li>Random designs</li>
<li>Labeled designs (a.k.a. “alternative-specific” designs)</li>
<li>Designs with a “no choice” option (a.k.a. “outside good”)</li>
<li>Bayesian D-efficient designs</li>
</ul>
<div class="section level3">
<h3 id="random-designs">Random designs<a class="anchor" aria-label="anchor" href="#random-designs"></a>
</h3>
<p>The randomized design simply samples from the set of <code>profiles</code>, ensuring that no two profiles are the same in any choice question. The resulting <code>design</code> data frame includes the following columns:</p>
<ul>
<li>
<code>profileID</code>: Identifies the profile in <code>profiles</code>.</li>
<li>
<code>respID</code>: Identifies each survey respondent.</li>
<li>
<code>qID</code>: Identifies the choice question answered by the respondent.</li>
<li>
<code>altID</code>:Identifies the alternative in any one choice observation.</li>
<li>
<code>obsID</code>: Identifies each unique choice observation across all respondents.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>    <span class="co"># Number of questions per respondent</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span>  <span class="co"># View dimensions</span></span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span> <span class="co"># Preview first 6 rows</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        56      1   1     1     1   4.0       Gala Excellent</span></span>
<span><span class="co">#&gt; 2        37      1   1     2     1   1.5 Honeycrisp   Average</span></span>
<span><span class="co">#&gt; 3         6      1   1     3     1   3.5       Fuji      Poor</span></span>
<span><span class="co">#&gt; 4        48      1   2     1     2   3.5       Fuji Excellent</span></span>
<span><span class="co">#&gt; 5        63      1   2     2     2   4.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 6        20      1   2     3     2   3.5 Honeycrisp      Poor</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="labeled-designs-a-k-a--alternative-specific-designs">Labeled designs (a.k.a. “alternative-specific” designs)<a class="anchor" aria-label="anchor" href="#labeled-designs-a-k-a--alternative-specific-designs"></a>
</h3>
<p>You can also make a “labeled” design (also known as “alternative-specific” design) where the levels of one attribute is used as a label by setting the <code>label</code> argument to that attribute. This by definition sets the number of alternatives in each question to the number of levels in the chosen attribute, so the <code>n_alts</code> argument is overridden. Here is an example labeled survey using the <code>type</code> attribute as the label:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>,   <span class="co"># Number of questions per respondent</span></span>
<span>  label     <span class="op">=</span> <span class="st">"type"</span> <span class="co"># Set the "type" attribute as the label</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_labeled</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_labeled</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        49      1   1     1     1   4.0       Fuji Excellent</span></span>
<span><span class="co">#&gt; 2        31      1   1     2     1   2.0       Gala   Average</span></span>
<span><span class="co">#&gt; 3        18      1   1     3     1   2.5 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 4         1      1   2     1     2   1.0       Fuji      Poor</span></span>
<span><span class="co">#&gt; 5        54      1   2     2     2   3.0       Gala Excellent</span></span>
<span><span class="co">#&gt; 6        60      1   2     3     2   2.5 Honeycrisp Excellent</span></span></code></pre></div>
<p>In the above example, you can see in the first six rows of the survey that the <code>type</code> attribute is always fixed to be the same order, ensuring that each level in the <code>type</code> attribute will always be shown in each choice question.</p>
</div>
<div class="section level3">
<h3 id="designs-with-a-no-choice-option-a-k-a--outside-good">Designs with a “no choice” option (a.k.a. “outside good”)<a class="anchor" aria-label="anchor" href="#designs-with-a-no-choice-option-a-k-a--outside-good"></a>
</h3>
<p>You can include a “no choice” (also known as “outside good”) option in your survey by setting <code>no_choice = TRUE</code>. If included, all categorical attributes will be dummy-coded to appropriately dummy-code the “no choice” alternative.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_nochoice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Number of questions per respondent</span></span>
<span>  no_choice <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_nochoice</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21600    13</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_nochoice</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price type_Fuji type_Gala type_Honeycrisp</span></span>
<span><span class="co">#&gt; 1        18      1   1     1     1   2.5         0         0               1</span></span>
<span><span class="co">#&gt; 2        37      1   1     2     1   1.5         0         0               1</span></span>
<span><span class="co">#&gt; 3        38      1   1     3     1   2.0         0         0               1</span></span>
<span><span class="co">#&gt; 4         0      1   1     4     1   0.0         0         0               0</span></span>
<span><span class="co">#&gt; 5        59      1   2     1     2   2.0         0         0               1</span></span>
<span><span class="co">#&gt; 6        55      1   2     2     2   3.5         0         1               0</span></span>
<span><span class="co">#&gt;   freshness_Poor freshness_Average freshness_Excellent no_choice</span></span>
<span><span class="co">#&gt; 1              1                 0                   0         0</span></span>
<span><span class="co">#&gt; 2              0                 1                   0         0</span></span>
<span><span class="co">#&gt; 3              0                 1                   0         0</span></span>
<span><span class="co">#&gt; 4              0                 0                   0         1</span></span>
<span><span class="co">#&gt; 5              0                 0                   1         0</span></span>
<span><span class="co">#&gt; 6              0                 0                   1         0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bayesian-d-efficient-designs">Bayesian D-efficient designs<a class="anchor" aria-label="anchor" href="#bayesian-d-efficient-designs"></a>
</h3>
<p>A Bayesian D-efficient design can be obtained by providing a list of prior parameters to define an expected prior utility model. These designs are optimized to minimize the D-error of the design given a prior model. The optimization is handled using the <a href="https://www.jstatsoft.org/article/view/v096i03" class="external-link">{idefix} package</a>. For now, designs are limited to multinomial logit priors (the {idefix} package can generate designs with mixed logit priors). These designs also currently do not support the ability to specify interaction terms in the prior model or use “labeled” designs.</p>
<p>In the example below, the prior model assumes the following parameters:</p>
<ul>
<li>1 continuous parameter for <code>price</code>
</li>
<li>2 categorical parameters for <code>type</code> (<code>'Gala'</code> and <code>'Honeycrisp'</code>)</li>
<li>2 categorical parameters for <code>freshness</code> (<code>"Average"</code> and <code>"Excellent"</code>)</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_db_eff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Number of questions per respondent</span></span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_db_eff</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16200     9</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_db_eff</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness blockID</span></span>
<span><span class="co">#&gt; 1         1      1   1     1     1     1       Fuji      Poor       1</span></span>
<span><span class="co">#&gt; 2        37      1   1     2     1     1 Honeycrisp   Average       1</span></span>
<span><span class="co">#&gt; 3        51      1   1     3     1     1       Gala Excellent       1</span></span>
<span><span class="co">#&gt; 4        15      1   2     1     2     1 Honeycrisp      Poor       1</span></span>
<span><span class="co">#&gt; 5        14      1   2     2     2     1       Gala      Poor       1</span></span>
<span><span class="co">#&gt; 6        48      1   2     3     2     1       Fuji Excellent       1</span></span></code></pre></div>
<p>Bayesian D-efficient designs that include a “no choice” option should set <code>no_choice = TRUE</code> and also define a prior for the “no choice” option using <code>prior_no_choice</code>, e.g.:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_db_eff_no_choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Number of questions per respondent</span></span>
<span>  no_choice <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  prior_no_choice <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_db_eff_no_choice</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21600    12</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_db_eff_no_choice</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price type_Gala type_Honeycrisp</span></span>
<span><span class="co">#&gt; 1        43      1   1     1     1     1         0               0</span></span>
<span><span class="co">#&gt; 2        31      1   1     2     1     2         1               0</span></span>
<span><span class="co">#&gt; 3        15      1   1     3     1     1         0               1</span></span>
<span><span class="co">#&gt; 4        NA      1   1     4     1     0         0               0</span></span>
<span><span class="co">#&gt; 5        50      1   2     1     2     1         1               0</span></span>
<span><span class="co">#&gt; 6        36      1   2     2     2     1         0               1</span></span>
<span><span class="co">#&gt;   freshness_Average freshness_Excellent no_choice blockID</span></span>
<span><span class="co">#&gt; 1                 0                   1         0       1</span></span>
<span><span class="co">#&gt; 2                 1                   0         0       1</span></span>
<span><span class="co">#&gt; 3                 0                   0         0       1</span></span>
<span><span class="co">#&gt; 4                 0                   0         1       1</span></span>
<span><span class="co">#&gt; 5                 0                   1         0       1</span></span>
<span><span class="co">#&gt; 6                 1                   0         0       1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="inspect-survey-designs">Inspect survey designs<a class="anchor" aria-label="anchor" href="#inspect-survey-designs"></a>
</h2>
<p>The package includes some functions to quickly inspect some basic metrics of a design.</p>
<p>The <code><a href="../reference/cbc_balance.html">cbc_balance()</a></code> function prints out a summary of the individual and pairwise counts of each level of each attribute across all choice questions:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cbc_balance.html">cbc_balance</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="co">#&gt; =====================================</span></span>
<span><span class="co">#&gt; Individual attribute level counts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1  1.5    2  2.5    3  3.5    4 </span></span>
<span><span class="co">#&gt; 2267 2389 2303 2278 2255 2315 2393 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Fuji       Gala Honeycrisp </span></span>
<span><span class="co">#&gt;       5374       5367       5459 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Poor   Average Excellent </span></span>
<span><span class="co">#&gt;      5389      5433      5378 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; =====================================</span></span>
<span><span class="co">#&gt; Pairwise attribute level counts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price x type:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;          Fuji Gala Honeycrisp</span></span>
<span><span class="co">#&gt;       NA 5374 5367       5459</span></span>
<span><span class="co">#&gt; 1   2267  757  776        734</span></span>
<span><span class="co">#&gt; 1.5 2389  802  793        794</span></span>
<span><span class="co">#&gt; 2   2303  728  774        801</span></span>
<span><span class="co">#&gt; 2.5 2278  769  755        754</span></span>
<span><span class="co">#&gt; 3   2255  754  735        766</span></span>
<span><span class="co">#&gt; 3.5 2315  794  755        766</span></span>
<span><span class="co">#&gt; 4   2393  770  779        844</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price x freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;          Poor Average Excellent</span></span>
<span><span class="co">#&gt;       NA 5389    5433      5378</span></span>
<span><span class="co">#&gt; 1   2267  781     786       700</span></span>
<span><span class="co">#&gt; 1.5 2389  806     774       809</span></span>
<span><span class="co">#&gt; 2   2303  725     794       784</span></span>
<span><span class="co">#&gt; 2.5 2278  746     785       747</span></span>
<span><span class="co">#&gt; 3   2255  757     721       777</span></span>
<span><span class="co">#&gt; 3.5 2315  788     746       781</span></span>
<span><span class="co">#&gt; 4   2393  786     827       780</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type x freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                 Poor Average Excellent</span></span>
<span><span class="co">#&gt;              NA 5389    5433      5378</span></span>
<span><span class="co">#&gt; Fuji       5374 1825    1753      1796</span></span>
<span><span class="co">#&gt; Gala       5367 1743    1843      1781</span></span>
<span><span class="co">#&gt; Honeycrisp 5459 1821    1837      1801</span></span></code></pre></div>
<p>The <code><a href="../reference/cbc_overlap.html">cbc_overlap()</a></code> function prints out a summary of the amount of “overlap” across attributes within the choice questions. For example, for each attribute, the count under <code>"1"</code> is the number of choice questions in which the same level was shown across all alternatives for that attribute (because there was only one level shown). Likewise, the count under <code>"2"</code> is the number of choice questions in which only two unique levels of that attribute were shown, and so on:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cbc_overlap.html">cbc_overlap</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="co">#&gt; ==============================</span></span>
<span><span class="co">#&gt; Counts of attribute overlap:</span></span>
<span><span class="co">#&gt; (# of questions with N unique levels)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 </span></span>
<span><span class="co">#&gt;   75 1819 3506 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 </span></span>
<span><span class="co">#&gt;  578 3606 1216 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 </span></span>
<span><span class="co">#&gt;  548 3549 1303</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simulate-choices">Simulate choices<a class="anchor" aria-label="anchor" href="#simulate-choices"></a>
</h2>
<p>You can simulate choices for a given <code>design</code> using the <code><a href="../reference/cbc_choices.html">cbc_choices()</a></code> function.</p>
<div class="section level3">
<h3 id="random-choices">Random choices<a class="anchor" aria-label="anchor" href="#random-choices"></a>
</h3>
<p>By default, random choices are simulated:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID  <span class="op">=</span> <span class="st">"obsID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness choice</span></span>
<span><span class="co">#&gt; 1        56      1   1     1     1   4.0       Gala Excellent      0</span></span>
<span><span class="co">#&gt; 2        37      1   1     2     1   1.5 Honeycrisp   Average      1</span></span>
<span><span class="co">#&gt; 3         6      1   1     3     1   3.5       Fuji      Poor      0</span></span>
<span><span class="co">#&gt; 4        48      1   2     1     2   3.5       Fuji Excellent      1</span></span>
<span><span class="co">#&gt; 5        63      1   2     2     2   4.0 Honeycrisp Excellent      0</span></span>
<span><span class="co">#&gt; 6        20      1   2     3     2   3.5 Honeycrisp      Poor      0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="choices-according-to-a-prior">Choices according to a prior<a class="anchor" aria-label="anchor" href="#choices-according-to-a-prior"></a>
</h3>
<p>You can also pass a list of prior parameters to define a utility model that will be used to simulate choices. In the example below, the choices are simulated using a utility model with the following parameters:</p>
<ul>
<li>1 continuous parameter for <code>price</code>
</li>
<li>2 categorical parameters for <code>type</code> (<code>'Gala'</code> and <code>'Honeycrisp'</code>)</li>
<li>2 categorical parameters for <code>freshness</code> (<code>"Average"</code> and <code>"Excellent"</code>)</li>
</ul>
<p>Note that for categorical variables (<code>type</code> and <code>freshness</code> in this example), the first level defined when using <code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code> is set as the reference level. The example below defines the following utility model for simulating choices for each alternative <em>j</em>:</p>
<p><span class="math display">\[
u_j = -0.1price_j + 0.1typeGala_j + 0.2typeHoneycrisp_j + 0.1freshnessAverage_j + 0.2freshnessExcellent_j + \varepsilon_j
\]</span></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you wish to include a prior model with an interaction, you can do so inside the <code>priors</code> list. For example, here is the same example as above but with an interaction between <code>price</code> and <code>type</code> added:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    `price*type` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Finally, you can also simulate data for a mixed logit model where parameters follow a normal or log-normal distribution across the population. In the example below, the <code><a href="../reference/randN.html">randN()</a></code> function is used to specify the <code>type</code> attribute with 2 random normal parameters with a specified vector of means (<code>mean</code>) and standard deviations (<code>sd</code>) for each level of <code>type</code>. Log-normal parameters are specified using <code><a href="../reference/randLN.html">randLN()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type <span class="op">=</span> <span class="fu"><a href="../reference/randN.html">randN</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>, sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conduct-a-power-analysis">Conduct a power analysis<a class="anchor" aria-label="anchor" href="#conduct-a-power-analysis"></a>
</h2>
<p>The simulated choice data can be used to conduct a power analysis by estimating the same model multiple times with incrementally increasing sample sizes. As the sample size increases, the estimated coefficient standard errors will decrease (i.e. coefficient estimates become more precise). The <code><a href="../reference/cbc_power.html">cbc_power()</a></code> function achieves this by partitioning the choice data into multiple sizes (defined by the <code>nbreaks</code> argument) and then estimating a user-defined choice model on each data subset. In the example below, 10 different sample sizes are used. All models are estimated using the <a href="https://jhelvy.github.io/logitr/" class="external-link">{logitr}</a> package:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">data</span>,</span>
<span>  pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  n_q     <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">power</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sampleSize               coef           est         se</span></span>
<span><span class="co">#&gt; 1         90              price  0.0194032939 0.05206766</span></span>
<span><span class="co">#&gt; 2         90           typeGala -0.2346303038 0.13210564</span></span>
<span><span class="co">#&gt; 3         90     typeHoneycrisp -0.0006509031 0.12598359</span></span>
<span><span class="co">#&gt; 4         90   freshnessAverage  0.0208008340 0.13126015</span></span>
<span><span class="co">#&gt; 5         90 freshnessExcellent  0.0874246468 0.13127006</span></span>
<span><span class="co">#&gt; 6        180              price  0.0326991251 0.03721450</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">power</span><span class="op">)</span></span>
<span><span class="co">#&gt;    sampleSize               coef          est         se</span></span>
<span><span class="co">#&gt; 45        810 freshnessExcellent  0.005303617 0.04265240</span></span>
<span><span class="co">#&gt; 46        900              price -0.036187710 0.01642228</span></span>
<span><span class="co">#&gt; 47        900           typeGala -0.016600717 0.04079982</span></span>
<span><span class="co">#&gt; 48        900     typeHoneycrisp -0.026018983 0.04055057</span></span>
<span><span class="co">#&gt; 49        900   freshnessAverage  0.024840291 0.04037145</span></span>
<span><span class="co">#&gt; 50        900 freshnessExcellent  0.002927759 0.04051564</span></span></code></pre></div>
<p>The <code>power</code> data frame contains the coefficient estimates and standard errors for each sample size. You can quickly visualize the outcome to identify a required sample size for a desired level of parameter precision by using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">power</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/power-1.png" width="700"></p>
<p>If you want to examine any other aspects of the models other than the standard errors, you can set <code>return_models = TRUE</code> and <code><a href="../reference/cbc_power.html">cbc_power()</a></code> will return a list of estimated models. The example below prints a summary of the last model in the list of models:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhelvy/logitr" class="external-link">logitr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">data</span>,</span>
<span>  pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  n_q     <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  return_models <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">models</span><span class="op">[[</span><span class="fl">10</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; =================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model estimated on: Mon Feb 20 16:03:25 2023 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Using logitr version: 1.0.1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; FUN(data = X[[i]], outcome = ..1, obsID = ..2, pars = ..3, randPars = ..4, </span></span>
<span><span class="co">#&gt;     panelID = ..5, clusterID = ..6, robust = ..7, predict = ..8)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Frequencies of alternatives:</span></span>
<span><span class="co">#&gt;       1       2       3 </span></span>
<span><span class="co">#&gt; 0.34370 0.32537 0.33093 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Exit Status: 3, Optimization stopped because ftol_rel or ftol_abs was reached.</span></span>
<span><span class="co">#&gt;                                 </span></span>
<span><span class="co">#&gt; Model Type:    Multinomial Logit</span></span>
<span><span class="co">#&gt; Model Space:          Preference</span></span>
<span><span class="co">#&gt; Model Run:                1 of 1</span></span>
<span><span class="co">#&gt; Iterations:                    8</span></span>
<span><span class="co">#&gt; Elapsed Time:        0h:0m:0.03s</span></span>
<span><span class="co">#&gt; Algorithm:        NLOPT_LD_LBFGS</span></span>
<span><span class="co">#&gt; Weights Used?:             FALSE</span></span>
<span><span class="co">#&gt; Robust?                    FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Coefficients: </span></span>
<span><span class="co">#&gt;                      Estimate Std. Error z-value Pr(&gt;|z|)  </span></span>
<span><span class="co">#&gt; price              -0.0361877  0.0164223 -2.2036  0.02755 *</span></span>
<span><span class="co">#&gt; typeGala           -0.0166007  0.0407998 -0.4069  0.68409  </span></span>
<span><span class="co">#&gt; typeHoneycrisp     -0.0260190  0.0405506 -0.6416  0.52111  </span></span>
<span><span class="co">#&gt; freshnessAverage    0.0248403  0.0403714  0.6153  0.53836  </span></span>
<span><span class="co">#&gt; freshnessExcellent  0.0029278  0.0405156  0.0723  0.94239  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt;                                      </span></span>
<span><span class="co">#&gt; Log-Likelihood:         -5.929644e+03</span></span>
<span><span class="co">#&gt; Null Log-Likelihood:    -5.932506e+03</span></span>
<span><span class="co">#&gt; AIC:                     1.186929e+04</span></span>
<span><span class="co">#&gt; BIC:                     1.190226e+04</span></span>
<span><span class="co">#&gt; McFadden R2:             4.824948e-04</span></span>
<span><span class="co">#&gt; Adj McFadden R2:        -3.603193e-04</span></span>
<span><span class="co">#&gt; Number of Observations:  5.400000e+03</span></span></code></pre></div>
<div class="section level3">
<h3 id="pipe-it-all-together">Pipe it all together!<a class="anchor" aria-label="anchor" href="#pipe-it-all-together"></a>
</h3>
<p>One of the convenient features of how the package is written is that the object generated in each step is used as the first argument to the function for the next step. Thus, just like in the overall program diagram, the functions can be piped together. For example, the “pipeline” below uses the Base R pipe operator (<code>|&gt;</code>) to generate profiles, generate a design, simulate choices according to a prior utility model, conduct a power analysis, and then finally plot the results:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">0.5</span><span class="op">)</span>, <span class="co"># $ per pound</span></span>
<span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Fuji'</span>, <span class="st">'Gala'</span>, <span class="st">'Honeycrisp'</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>    <span class="co"># Number of questions per respondent</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>    pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>    outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>    obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>    nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    n_q     <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Helveston.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
