<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Usage • cbcTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Usage">
<meta property="og:description" content="cbcTools">
<meta property="og:image" content="https://jhelvy.github.io/cbcTools/reference/figures/logo.png">
<meta property="og:image:alt" content="Logo for the cbcTools package">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@JohnHelveston">
<meta name="twitter:site" content="@JohnHelveston">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cbcTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/usage.html">Usage</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jhelvy/cbcTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/cbcTools/blob/HEAD/vignettes/usage.Rmd" class="external-link"><code>vignettes/usage.Rmd</code></a></small>
      <div class="hidden name"><code>usage.Rmd</code></div>

    </div>

    
    
<p>This package provides functions for designing surveys and conducting
power analyses for choice-based conjoint survey experiments in R. Each
function in the package begins with <code>cbc_</code> and supports a
step in the following process for designing and analyzing surveys:</p>
<center>
<img src="https://jhelvy.github.io/cbcTools/reference/figures/program_diagram.png" width="100%">
</center>
<p>This guide walks through each step of this design process.</p>
<div class="section level2">
<h2 id="generate-profiles">Generate profiles<a class="anchor" aria-label="anchor" href="#generate-profiles"></a>
</h2>
<div class="section level3">
<h3 id="all-profiles">All profiles<a class="anchor" aria-label="anchor" href="#all-profiles"></a>
</h3>
<p>The first step in designing an experiment is to define the attributes
and levels for your experiment and then generate all of the
<code>profiles</code> of each possible combination of those attributes
and levels. For example, let’s say you’re designing a conjoint
experiment about apples and you want to include <code>price</code>,
<code>type</code>, and <code>freshness</code> as attributes. You can
obtain all of the possible profiles for these attributes using the
<code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code> function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhelvy/cbcTools" class="external-link">cbcTools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">0.5</span><span class="op">)</span>, <span class="co"># $ per pound</span></span>
<span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Fuji'</span>, <span class="st">'Gala'</span>, <span class="st">'Honeycrisp'</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 81</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID price type freshness</span></span>
<span><span class="co">#&gt; 1         1   1.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 2         2   1.5 Fuji      Poor</span></span>
<span><span class="co">#&gt; 3         3   2.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 4         4   2.5 Fuji      Poor</span></span>
<span><span class="co">#&gt; 5         5   3.0 Fuji      Poor</span></span>
<span><span class="co">#&gt; 6         6   3.5 Fuji      Poor</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt;    profileID price       type freshness</span></span>
<span><span class="co">#&gt; 76        76   2.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 77        77   3.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 78        78   3.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 79        79   4.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 80        80   4.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 81        81   5.0 Honeycrisp Excellent</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="restricted-profiles">Restricted profiles<a class="anchor" aria-label="anchor" href="#restricted-profiles"></a>
</h3>
<p>Depending on the context of your survey, you may wish to eliminate
some profiles before designing your conjoint survey (e.g., some profile
combinations may be illogical or unrealistic).</p>
<blockquote>
<p><strong>CAUTION: including restrictions in your designs can
substantially reduce the statistical power of your design, so use them
cautiously and avoid them if possible</strong>.</p>
</blockquote>
<p>If you do wish to restrict some attribute level combinations, you can
do so using the <code><a href="../reference/cbc_restrict.html">cbc_restrict()</a></code> function, which takes the
full set of <code>profiles</code> along with any number of restricted
pairs of attribute levels, defined as pairs of logical expressions
separated by commas. In the example below, I include the following
restrictions (these are arbitrary and just for illustration
purposes):</p>
<ul>
<li>
<code>"Gala"</code> apples will not be shown with the prices
<code>1.5</code>, <code>2.5</code>, and <code>3.5</code>.</li>
<li>
<code>"Honeycrisp"</code> apples will not be shown with prices less
than <code>2</code>.</li>
<li>
<code>"Fuji"</code> apples will not be shown with the
<code>"Excellent"</code> freshness.</li>
</ul>
<p>With these restrictions, there are now only 57 profiles compared to
81 without them:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">restricted_profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_restrict.html">cbc_restrict</a></span><span class="op">(</span></span>
<span>    <span class="va">profiles</span>,</span>
<span>    <span class="va">type</span> <span class="op">==</span> <span class="st">"Gala"</span> <span class="op">&amp;</span> <span class="va">price</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span>,</span>
<span>    <span class="va">type</span> <span class="op">==</span> <span class="st">"Honeycrisp"</span> <span class="op">&amp;</span> <span class="va">price</span> <span class="op">&lt;</span> <span class="fl">2</span>,</span>
<span>    <span class="va">type</span> <span class="op">==</span> <span class="st">"Fuji"</span> <span class="op">&amp;</span> <span class="va">freshness</span> <span class="op">==</span> <span class="st">"Excellent"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">restricted_profiles</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 57  4</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="generate-survey-designs">Generate survey designs<a class="anchor" aria-label="anchor" href="#generate-survey-designs"></a>
</h2>
<p>Once a set of profiles is obtained, a conjoint survey can then be
generated using the <code><a href="../reference/cbc_design.html">cbc_design()</a></code> function. The function
takes several arguments that are common to all design methods:</p>
<ul>
<li>
<code>profiles</code>: A data frame of profiles (generated with
<code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code>) to use in the design (with or without
restrictions).</li>
<li>
<code>n_resp</code>: The number of respondents in the survey.</li>
<li>
<code>n_alts</code>: The number of alternatives per question.</li>
<li>
<code>n_q</code>: The number of questions per respondent.</li>
<li>
<code>method</code>: The design strategy to use (defaults to
<code>"random"</code>).</li>
</ul>
<p>The <code>method</code> argument determines the design strategy to
use: <code>"random"</code>, <code>"full"</code>,
<code>"orthogonal"</code>, <code>"dopt"</code>, <code>"CEA"</code>, or
<code>"Modfed"</code>. All methods ensure that the two following
criteria are met:</p>
<ol style="list-style-type: decimal">
<li>No two profiles are the same within any one choice set.</li>
<li>No two choice sets are the same within any one respondent.</li>
</ol>
<p>The table below summarizes method compatibility with other design
options, including the ability to include a “no choice” option, the
creation of a “labeled” design (also called a “alternative-specific”
design), the use of restricted profiles, and the use of blocking.</p>
<table class="table">
<thead><tr class="header">
<th>Method</th>
<th>No choice</th>
<th>Labeled designs</th>
<th>Restricted profiles</th>
<th>Blocking</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"random"</code></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td><code>"full"</code></td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td><code>"orthogonal"</code></td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<td><code>"dopt"</code></td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td><code>"CEA"</code></td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="even">
<td><code>"Modfed"</code></td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>The returned <code>design</code> data frame contains a choice-based
conjoint survey design where each row is an alternative. It includes the
following columns:</p>
<ul>
<li>
<code>profileID</code>: Identifies the profile in
<code>profiles</code>.</li>
<li>
<code>respID</code>: Identifies each survey respondent.</li>
<li>
<code>qID</code>: Identifies the choice question answered by the
respondent.</li>
<li>
<code>altID</code>:Identifies the alternative in any one choice
observation.</li>
<li>
<code>obsID</code>: Identifies each unique choice observation across
all respondents.</li>
<li>
<code>blockID</code>: If blocking is used, identifies each unique
block.</li>
</ul>
<div class="section level3">
<h3 id="random-designs">Random designs<a class="anchor" aria-label="anchor" href="#random-designs"></a>
</h3>
<p>The <code>"random"</code> method (the default) creates a design where
choice sets are created by randomly sampling from the full set of
<code>profiles</code> <em>with</em> replacement. This means that few (if
any) respondents will see the same sets of choice sets. This method is
less efficient than other approaches and may lead to a deficient
experiment in smaller sample sizes, though it guarantees equal ability
to estimate main and interaction effects.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">5678</span><span class="op">)</span></span>
<span></span>
<span><span class="va">design_random</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>,   <span class="co"># Number of questions per respondent</span></span>
<span>  method   <span class="op">=</span> <span class="st">'random'</span> <span class="co"># This is the default method</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_random</span><span class="op">)</span>  </span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_random</span><span class="op">)</span> </span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        44      1   1     1     1   4.5       Gala   Average</span></span>
<span><span class="co">#&gt; 2        61      1   1     2     1   4.0       Fuji Excellent</span></span>
<span><span class="co">#&gt; 3        58      1   1     3     1   2.5       Fuji Excellent</span></span>
<span><span class="co">#&gt; 4        29      1   2     1     2   1.5       Fuji   Average</span></span>
<span><span class="co">#&gt; 5        21      1   2     2     2   2.0 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 6        44      1   2     3     2   4.5       Gala   Average</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="full-factorial-designs">Full factorial designs<a class="anchor" aria-label="anchor" href="#full-factorial-designs"></a>
</h3>
<p>The <code>"full"</code> method for (“full factorial”) creates a
design where choice sets are created by randomly sampling from the full
set of <code>profiles</code> <em>without replacement</em>. The choice
sets are then repeated to meet the desired number of survey respondents
(determined by <code>n_resp</code>). If blocking is used, choice set
blocks are created using mutually exclusive subsets of
<code>profiles</code> within each block. This method produces a design
with similar performance with that of the <code>"random"</code> method,
except the choice sets are repeated and thus there will be many more
opportunities for different respondents to see the same choice sets. For
more information about blocking with full factorial designs, see
<code><a href="https://rdrr.io/pkg/DoE.base/man/fac.design.html" class="external-link">?DoE.base::fac.design</a></code> as well as the JSS article on the
{DoE.base} package <span class="citation">(Grömping 2018)</span>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>,   <span class="co"># Number of questions per respondent</span></span>
<span>  method   <span class="op">=</span> <span class="st">'full'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_full</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_full</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        70      1   1     1     1   4.0       Gala Excellent</span></span>
<span><span class="co">#&gt; 2        28      1   1     2     1   1.0       Fuji   Average</span></span>
<span><span class="co">#&gt; 3         1      1   1     3     1   1.0       Fuji      Poor</span></span>
<span><span class="co">#&gt; 4         3      1   2     1     2   2.0       Fuji      Poor</span></span>
<span><span class="co">#&gt; 5        47      1   2     2     2   1.5 Honeycrisp   Average</span></span>
<span><span class="co">#&gt; 6        60      1   2     3     2   3.5       Fuji Excellent</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="orthogonal-designs">Orthogonal designs<a class="anchor" aria-label="anchor" href="#orthogonal-designs"></a>
</h3>
<p>The <code>"orthogonal"</code> method creates a design where an
orthogonal array from the full set of <code>profiles</code> is found and
then choice sets are created by randomly sampling from this orthogonal
array <em>without replacement</em>. The choice sets are then repeated to
meet the desired number of survey respondents (determined by
<code>n_resp</code>). If blocking is used, choice set blocks are created
using mutually exclusive subsets of the orthogonal array within each
block. For cases where an orthogonal array cannot be found, a full
factorial design is used. This approach is also sometimes called a “main
effects” design since orthogonal arrays focus the information on the
main effects at the expense of information about interaction effects.
For more information about orthogonal designs, see
<code><a href="https://rdrr.io/pkg/DoE.base/man/oa.design.html" class="external-link">?DoE.base::oa.design</a></code> as well as the JSS article on the
{DoE.base} package <span class="citation">(Grömping 2018)</span>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_orthogonal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>,   <span class="co"># Number of questions per respondent</span></span>
<span>  method   <span class="op">=</span> <span class="st">'orthogonal'</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Orthogonal array found; using 27 out of 81 profiles for design</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_orthogonal</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_orthogonal</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        73      1   1     1     1   1.0 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 2        22      1   1     2     1   2.5 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 3        38      1   1     3     1   1.5       Gala   Average</span></span>
<span><span class="co">#&gt; 4         2      1   2     1     2   1.5       Fuji      Poor</span></span>
<span><span class="co">#&gt; 5         1      1   2     2     2   1.0       Fuji      Poor</span></span>
<span><span class="co">#&gt; 6        68      1   2     3     2   3.0       Gala Excellent</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="d-optimal-designs">D-optimal designs<a class="anchor" aria-label="anchor" href="#d-optimal-designs"></a>
</h3>
<p>The <code>"dopt"</code> method creates a “D-optimal” design where an
array from <code>profiles</code> is found that maximizes the
D-efficiency of a linear model using the Federov algorithm, with the
total number of unique choice sets determined by
<code>n_q*n_blocks</code>. The optimization is handled using the <a href="https://cran.r-project.org/package=AlgDesign" class="external-link">{AlgDesign}
package</a>. Choice sets are then created by randomly sampling from this
array <em>without replacement</em>. The choice sets are then repeated to
meet the desired number of survey respondents (determined by
<code>n_resp</code>). If blocking is used, choice set blocks are created
from the D-optimal array. For more information about the underlying
algorithm for this method, see <code><a href="https://rdrr.io/pkg/AlgDesign/man/Federov.html" class="external-link">?AlgDesign::optFederov</a></code> <span class="citation">(Wheeler 2022)</span>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_dopt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>,   <span class="co"># Number of questions per respondent</span></span>
<span>  method   <span class="op">=</span> <span class="st">'dopt'</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; D-optimal design found with D-efficiency of 0.6</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_dopt</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_dopt</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1        10      1   1     1     1     1       Gala      Poor</span></span>
<span><span class="co">#&gt; 2        27      1   1     2     1     5 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 3        36      1   1     3     1     5       Fuji   Average</span></span>
<span><span class="co">#&gt; 4        36      1   2     1     2     5       Fuji   Average</span></span>
<span><span class="co">#&gt; 5        46      1   2     2     2     1 Honeycrisp   Average</span></span>
<span><span class="co">#&gt; 6        27      1   2     3     2     5 Honeycrisp      Poor</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bayesian-d-efficient-designs">Bayesian D-efficient designs<a class="anchor" aria-label="anchor" href="#bayesian-d-efficient-designs"></a>
</h3>
<p>The <code>"CEA"</code> and <code>"Modfed"</code> methods use the
specified <code>priors</code> to create a Bayesian D-efficient design
for the choice sets, with the total number of unique choice sets
determined by <code>n_q*n_blocks</code>. The choice sets are then
repeated to meet the desired number of survey respondents (determined by
<code>n_resp</code>). These designs are optimized to minimize the
D-error of the design given a prior model, which is handled using the <a href="https://CRAN.R-project.org/package=idefix" class="external-link">{idefix} package</a>.
For now, designs are limited to multinomial logit priors (the {idefix}
package can generate designs with mixed logit priors). These designs
also currently do not support the ability to specify interaction terms
in the prior model or use “labeled” designs. If <code>"CEA"</code> or
<code>"Modfed"</code> is used without specifying <code>priors</code>, a
prior of all <code>0</code>s will be used and a warning message stating
this will be shown. In the opposite case, if <code>priors</code> are
specified but neither Bayesian method is used, the <code>"CEA"</code>
method will be used and a warning stating this will be shown. Restricted
sets of <code>profiles</code> can only be used with
<code>"Modfed"</code>. For more details on Bayesian D-efficient designs,
see <code><a href="https://rdrr.io/pkg/idefix/man/CEA.html" class="external-link">?idefix::CEA</a></code> and <code><a href="https://rdrr.io/pkg/idefix/man/Modfed.html" class="external-link">?idefix::Modfed</a></code> as well
as the JSS article on the {idefix} package <span class="citation">(Traets, Sanchez, and Vandebroek 2020)</span>.</p>
<p>In the example below, the prior model assumes the following
parameters:</p>
<ul>
<li>1 continuous parameter for <code>price</code>
</li>
<li>2 categorical parameters for <code>type</code> (<code>'Gala'</code>
and <code>'Honeycrisp'</code>)</li>
<li>2 categorical parameters for <code>freshness</code>
(<code>"Average"</code> and <code>"Excellent"</code>)</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_bayesian</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Number of questions per respondent</span></span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">'CEA'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_bayesian</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16200     9</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_bayesian</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID blockID price       type freshness</span></span>
<span><span class="co">#&gt; 1         5      1   1     1     1       1   3.0       Fuji      Poor</span></span>
<span><span class="co">#&gt; 2        76      1   1     2     1       1   2.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 3        17      1   1     3     1       1   4.5       Gala      Poor</span></span>
<span><span class="co">#&gt; 4        78      1   2     1     2       1   3.5 Honeycrisp Excellent</span></span>
<span><span class="co">#&gt; 5        32      1   2     2     2       1   3.0       Fuji   Average</span></span>
<span><span class="co">#&gt; 6        14      1   2     3     2       1   3.0       Gala      Poor</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="labeled-designs-a-k-a--alternative-specific-designs">Labeled designs (a.k.a. “alternative-specific” designs)<a class="anchor" aria-label="anchor" href="#labeled-designs-a-k-a--alternative-specific-designs"></a>
</h3>
<p>A “labeled” design (also known as “alternative-specific” design) is
one where the levels of one attribute are used as a label. This can be
created by setting the <code>label</code> argument to that attribute. As
of now, only <code>"random"</code> and <code>"full"</code> methods
support labeled designs. Since this by definition sets the number of
alternatives in each question to the number of levels in the chosen
attribute, the <code>n_alts</code> argument is overridden. Here is an
example of a labeled random design using the <code>type</code> attribute
as the label:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_random_labeled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>,   <span class="co"># Number of questions per respondent</span></span>
<span>  label    <span class="op">=</span> <span class="st">"type"</span> <span class="co"># Set the "type" attribute as the label</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_random_labeled</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16200     8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_random_labeled</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness</span></span>
<span><span class="co">#&gt; 1         4      1   1     1     1   2.5       Fuji      Poor</span></span>
<span><span class="co">#&gt; 2        64      1   1     2     1   1.0       Gala Excellent</span></span>
<span><span class="co">#&gt; 3        22      1   1     3     1   2.5 Honeycrisp      Poor</span></span>
<span><span class="co">#&gt; 4         4      1   2     1     2   2.5       Fuji      Poor</span></span>
<span><span class="co">#&gt; 5        15      1   2     2     2   3.5       Gala      Poor</span></span>
<span><span class="co">#&gt; 6        49      1   2     3     2   2.5 Honeycrisp   Average</span></span></code></pre></div>
<p>In the above example, the <code>type</code> attribute is now fixed to
be the same order for every choice question, ensuring that each level in
the <code>type</code> attribute will always be shown in each choice
question.</p>
</div>
<div class="section level3">
<h3 id="designs-with-a-no-choice-option-a-k-a--an-outside-good">Designs with a “no choice” option (a.k.a. an “outside good”)<a class="anchor" aria-label="anchor" href="#designs-with-a-no-choice-option-a-k-a--an-outside-good"></a>
</h3>
<p>A “no choice” (also known as an “outside good”) option can be
included by setting <code>no_choice = TRUE</code>. If included, all
categorical attributes will be dummy-coded to appropriately dummy-code
the “no choice” alternative. All design methods can have a “no choice”
added.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_nochoice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Number of questions per respondent</span></span>
<span>  no_choice <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_nochoice</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21600    13</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_nochoice</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price type_Fuji type_Gala type_Honeycrisp</span></span>
<span><span class="co">#&gt; 1        47      1   1     1     1   1.5         0         0               1</span></span>
<span><span class="co">#&gt; 2        48      1   1     2     1   2.0         0         0               1</span></span>
<span><span class="co">#&gt; 3         9      1   1     3     1   5.0         1         0               0</span></span>
<span><span class="co">#&gt; 4         0      1   1     4     1   0.0         0         0               0</span></span>
<span><span class="co">#&gt; 5        54      1   2     1     2   5.0         0         0               1</span></span>
<span><span class="co">#&gt; 6         7      1   2     2     2   4.0         1         0               0</span></span>
<span><span class="co">#&gt;   freshness_Poor freshness_Average freshness_Excellent no_choice</span></span>
<span><span class="co">#&gt; 1              0                 1                   0         0</span></span>
<span><span class="co">#&gt; 2              0                 1                   0         0</span></span>
<span><span class="co">#&gt; 3              1                 0                   0         0</span></span>
<span><span class="co">#&gt; 4              0                 0                   0         1</span></span>
<span><span class="co">#&gt; 5              0                 1                   0         0</span></span>
<span><span class="co">#&gt; 6              1                 0                   0         0</span></span></code></pre></div>
<p>For Bayesian D-efficient designs that include a “no choice” option, a
prior for the “no choice” option must also be provided using
<code>prior_no_choice</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design_bayesian_no_choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp    <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts    <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span>  n_q       <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Number of questions per respondent</span></span>
<span>  no_choice <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  prior_no_choice <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>  method <span class="op">=</span> <span class="st">'CEA'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">design_bayesian_no_choice</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 21600    14</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">design_bayesian_no_choice</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID blockID price type_Gala type_Honeycrisp</span></span>
<span><span class="co">#&gt; 1        19      1   1     1     1       1     1         0               1</span></span>
<span><span class="co">#&gt; 2        19      1   1     2     1       1     1         0               1</span></span>
<span><span class="co">#&gt; 3        28      1   1     3     1       1     1         0               0</span></span>
<span><span class="co">#&gt; 4         0      1   1     4     1       1     0         0               0</span></span>
<span><span class="co">#&gt; 5        46      1   2     1     2       1     1         0               1</span></span>
<span><span class="co">#&gt; 6        46      1   2     2     2       1     1         0               1</span></span>
<span><span class="co">#&gt;   type_NA freshness_Average freshness_Excellent freshness_NA no_choice</span></span>
<span><span class="co">#&gt; 1       0                 0                   0            0         0</span></span>
<span><span class="co">#&gt; 2       0                 0                   0            0         0</span></span>
<span><span class="co">#&gt; 3       0                 1                   0            0         0</span></span>
<span><span class="co">#&gt; 4       0                 0                   0            0         1</span></span>
<span><span class="co">#&gt; 5       0                 1                   0            0         0</span></span>
<span><span class="co">#&gt; 6       0                 1                   0            0         0</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="inspect-survey-designs">Inspect survey designs<a class="anchor" aria-label="anchor" href="#inspect-survey-designs"></a>
</h2>
<p>The package includes some functions to quickly inspect some basic
metrics of a design.</p>
<p>The <code><a href="../reference/cbc_balance.html">cbc_balance()</a></code> function prints out a summary of the
individual and pairwise counts of each level of each attribute across
all choice questions:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, </span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   </span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/cbc_balance.html">cbc_balance</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="co">#&gt; =====================================</span></span>
<span><span class="co">#&gt; Individual attribute level counts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1  1.5    2  2.5    3  3.5    4  4.5    5 </span></span>
<span><span class="co">#&gt; 1838 1762 1884 1813 1792 1812 1732 1803 1764 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Fuji       Gala Honeycrisp </span></span>
<span><span class="co">#&gt;       5446       5422       5332 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Poor   Average Excellent </span></span>
<span><span class="co">#&gt;      5355      5458      5387 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; =====================================</span></span>
<span><span class="co">#&gt; Pairwise attribute level counts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price x type:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;          Fuji Gala Honeycrisp</span></span>
<span><span class="co">#&gt;       NA 5446 5422       5332</span></span>
<span><span class="co">#&gt; 1   1838  629  593        616</span></span>
<span><span class="co">#&gt; 1.5 1762  596  597        569</span></span>
<span><span class="co">#&gt; 2   1884  622  625        637</span></span>
<span><span class="co">#&gt; 2.5 1813  583  600        630</span></span>
<span><span class="co">#&gt; 3   1792  616  605        571</span></span>
<span><span class="co">#&gt; 3.5 1812  610  618        584</span></span>
<span><span class="co">#&gt; 4   1732  604  584        544</span></span>
<span><span class="co">#&gt; 4.5 1803  591  576        636</span></span>
<span><span class="co">#&gt; 5   1764  595  624        545</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price x freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;          Poor Average Excellent</span></span>
<span><span class="co">#&gt;       NA 5355    5458      5387</span></span>
<span><span class="co">#&gt; 1   1838  633     620       585</span></span>
<span><span class="co">#&gt; 1.5 1762  561     604       597</span></span>
<span><span class="co">#&gt; 2   1884  629     606       649</span></span>
<span><span class="co">#&gt; 2.5 1813  558     640       615</span></span>
<span><span class="co">#&gt; 3   1792  605     596       591</span></span>
<span><span class="co">#&gt; 3.5 1812  611     596       605</span></span>
<span><span class="co">#&gt; 4   1732  587     573       572</span></span>
<span><span class="co">#&gt; 4.5 1803  609     605       589</span></span>
<span><span class="co">#&gt; 5   1764  562     618       584</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type x freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                 Poor Average Excellent</span></span>
<span><span class="co">#&gt;              NA 5355    5458      5387</span></span>
<span><span class="co">#&gt; Fuji       5446 1837    1797      1812</span></span>
<span><span class="co">#&gt; Gala       5422 1766    1820      1836</span></span>
<span><span class="co">#&gt; Honeycrisp 5332 1752    1841      1739</span></span></code></pre></div>
<p>The <code><a href="../reference/cbc_overlap.html">cbc_overlap()</a></code> function prints out a summary of the
amount of “overlap” across attributes within the choice questions. For
example, for each attribute, the count under <code>"1"</code> is the
number of choice questions in which the same level was shown across all
alternatives for that attribute (because there was only one level
shown). Likewise, the count under <code>"2"</code> is the number of
choice questions in which only two unique levels of that attribute were
shown, and so on:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cbc_overlap.html">cbc_overlap</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="co">#&gt; ==============================</span></span>
<span><span class="co">#&gt; Counts of attribute overlap:</span></span>
<span><span class="co">#&gt; (# of questions with N unique levels)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; price:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 </span></span>
<span><span class="co">#&gt;   46 1433 3921 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; type:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 </span></span>
<span><span class="co">#&gt;  558 3612 1230 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; freshness:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1    2    3 </span></span>
<span><span class="co">#&gt;  578 3524 1298</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simulate-choices">Simulate choices<a class="anchor" aria-label="anchor" href="#simulate-choices"></a>
</h2>
<p>Choices for a given design can be simulated using the
<code><a href="../reference/cbc_choices.html">cbc_choices()</a></code> function. This function requires a
<code>design</code> argument (a design generated by
<code><a href="../reference/cbc_design.html">cbc_design()</a></code>), and an <code>obsID</code> argument, which is
the column in <code>design</code> that identifies each unique choice
observation. By default, random choices are simulated:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID  <span class="op">=</span> <span class="st">"obsID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   profileID respID qID altID obsID price       type freshness choice</span></span>
<span><span class="co">#&gt; 1        73      1   1     1     1   1.0 Honeycrisp Excellent      0</span></span>
<span><span class="co">#&gt; 2        65      1   1     2     1   1.5       Gala Excellent      0</span></span>
<span><span class="co">#&gt; 3        10      1   1     3     1   1.0       Gala      Poor      1</span></span>
<span><span class="co">#&gt; 4        34      1   2     1     2   4.0       Fuji   Average      0</span></span>
<span><span class="co">#&gt; 5        79      1   2     2     2   4.0 Honeycrisp Excellent      0</span></span>
<span><span class="co">#&gt; 6        33      1   2     3     2   3.5       Fuji   Average      1</span></span></code></pre></div>
<p>Choices can also be simulated according to an assumed prior model.
For this option, choices are simulated using the
<code>predict.logitr()</code> method from the <a href="https://jhelvy.github.io/logitr/" class="external-link">{logitr} package</a> <span class="citation">(Helveston 2023)</span>, which makes predictions
according to multinomial or mixed logit models.</p>
<p>The example below demonstrates how to simulate choices according to a
multinomial logit model with fixed parameters. Note that for categorical
variables (<code>type</code> and <code>freshness</code> in this
example), the first level defined when using <code><a href="../reference/cbc_profiles.html">cbc_profiles()</a></code>
is set as the reference level. In this example, the parameters define
the following utility model for each alternative <em>j</em>:</p>
<p><span class="math display">\[
u_{j} =
    -0.1 p_j +
    0.1 t^\mathrm{Gala}_j + 0.2 t^\mathrm{Honeycrisp}_j +
    0.1 f^\mathrm{Average}_j + 0.2 f^\mathrm{Excellent}_j +
    \varepsilon_{j}
\]</span></p>
<p>where <span class="math inline">\(p\)</span> is price, <span class="math inline">\(t\)</span> is type, and <span class="math inline">\(f\)</span> is freshness.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The prior model used to simulate choices can also include interaction
effects. For example, the example below is the same as the previous
example but with an added interaction between <code>price</code> and
<code>type</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    `price*type` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Finally, to simulate choices according to a mixed logit model where
parameters follow a normal or log-normal distribution across the
population, the <code><a href="../reference/randN.html">randN()</a></code> and <code><a href="../reference/randLN.html">randLN()</a></code> functions
can be used inside the <code>priors</code> list. The example below
models the <code>type</code> attribute with two random normal parameters
using a vector of means (<code>mean</code>) and standard deviations
(<code>sd</code>) for each level of <code>type</code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">design</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type <span class="op">=</span> <span class="fu"><a href="../reference/randN.html">randN</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>, sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="assess-power">Assess power<a class="anchor" aria-label="anchor" href="#assess-power"></a>
</h2>
<p>The simulated choice data can be used to conduct a power analysis by
estimating a model multiple times with incrementally increasing sample
sizes. As the sample size increases, the estimated coefficient standard
errors will decrease, enabling the experimenter to identify the sample
size required to achieve a desired level of precision.</p>
<p>The <code><a href="../reference/cbc_power.html">cbc_power()</a></code> function achieves this by partitioning
the choice data into multiple sizes (defined by the <code>nbreaks</code>
argument) and then estimating a user-defined choice model on each data
subset. Model parameters are defined as a vector of attribute names that
refer to column names in the <code>data</code> object. All models are
estimated using the <a href="https://jhelvy.github.io/logitr/" class="external-link">{logitr}
package</a>, and any additional arguments for estimating models with the
package can be passed through the <code><a href="../reference/cbc_power.html">cbc_power()</a></code> function. For
example, to assess power for a mixed logit model, the
<code>randPars</code> argument can be used. For more information, see
<code><a href="https://rdrr.io/pkg/logitr/man/logitr.html" class="external-link">?logitr::logitr</a></code> as well as the JSS article on the {logitr}
package <span class="citation">(Helveston 2023)</span>.</p>
<p>In the example below, the simulated choice data is broken into 10
chunks with increasing sample sizes and a multinomial logit model is
estimated on each chunk with parameters for <code>price</code>,
<code>type</code>, and <code>freshness</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">data</span>,</span>
<span>  pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  n_q     <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">power</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sampleSize               coef          est         se</span></span>
<span><span class="co">#&gt; 1         90              price  0.039316159 0.04180211</span></span>
<span><span class="co">#&gt; 2         90           typeGala -0.074792614 0.13102947</span></span>
<span><span class="co">#&gt; 3         90     typeHoneycrisp  0.249773359 0.13321212</span></span>
<span><span class="co">#&gt; 4         90   freshnessAverage -0.293822461 0.12905576</span></span>
<span><span class="co">#&gt; 5         90 freshnessExcellent -0.249666465 0.12678919</span></span>
<span><span class="co">#&gt; 6        180              price  0.004215383 0.02887776</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">power</span><span class="op">)</span></span>
<span><span class="co">#&gt;    sampleSize               coef         est         se</span></span>
<span><span class="co">#&gt; 45        810 freshnessExcellent -0.04270355 0.04275524</span></span>
<span><span class="co">#&gt; 46        900              price -0.01341887 0.01283066</span></span>
<span><span class="co">#&gt; 47        900           typeGala  0.03440936 0.04059641</span></span>
<span><span class="co">#&gt; 48        900     typeHoneycrisp  0.03300050 0.04061671</span></span>
<span><span class="co">#&gt; 49        900   freshnessAverage -0.07456685 0.04049070</span></span>
<span><span class="co">#&gt; 50        900 freshnessExcellent -0.03041637 0.04052333</span></span></code></pre></div>
<p>The returned data frame contains the coefficient estimates and
standard errors for each chunk of the data. In the example above, it is
clear that the standard errors for a sample size of 900 are much lower
than those for a sample size of just 90. This approach can be used to
more precisely identify sample size requirements by increasing
<code>nbreaks</code>.</p>
<p>Visualizing the results of the power analysis can be particularly
helpful for identifying sample size requirements. Since the
<code><a href="../reference/cbc_power.html">cbc_power()</a></code> function returns a data frame in a “tidy” (or
“long”) format <span class="citation">(Wickham 2014)</span>, the results
can be conveniently plotted using the popular {ggplot2} package <span class="citation">(Wickham, Chang, and Wickham 2016)</span>. A
<code><a href="../reference/miscmethods.cbc_errors.html">plot.cbc_errors()</a></code> method is included in {cbcTools} to
create a simple ggplot of the power curves.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">power</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/power-1.png" width="700"></p>
<p>Researchers may be interested in aspects other than standard errors.
By setting <code>return_models = TRUE</code>, the
<code><a href="../reference/cbc_power.html">cbc_power()</a></code> function will return a list of estimated models
(one for each data chunk), which can then be used to examine other model
objects. The example below prints a summary of the last model in the
list of returned models from a power analysis.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">data</span>,</span>
<span>  pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  n_q     <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  return_models <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">models</span><span class="op">[[</span><span class="fl">10</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; =================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model estimated on: Thu Jul 13 09:53:08 2023 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Using logitr version: 1.1.0 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; FUN(data = X[[i]], outcome = ..1, obsID = ..2, pars = ..3, randPars = ..4, </span></span>
<span><span class="co">#&gt;     panelID = ..5, clusterID = ..6, robust = ..7, predict = ..8)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Frequencies of alternatives:</span></span>
<span><span class="co">#&gt;       1       2       3 </span></span>
<span><span class="co">#&gt; 0.32556 0.33778 0.33667 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Exit Status: 3, Optimization stopped because ftol_rel or ftol_abs was reached.</span></span>
<span><span class="co">#&gt;                                 </span></span>
<span><span class="co">#&gt; Model Type:    Multinomial Logit</span></span>
<span><span class="co">#&gt; Model Space:          Preference</span></span>
<span><span class="co">#&gt; Model Run:                1 of 1</span></span>
<span><span class="co">#&gt; Iterations:                    8</span></span>
<span><span class="co">#&gt; Elapsed Time:        0h:0m:0.02s</span></span>
<span><span class="co">#&gt; Algorithm:        NLOPT_LD_LBFGS</span></span>
<span><span class="co">#&gt; Weights Used?:             FALSE</span></span>
<span><span class="co">#&gt; Robust?                    FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Coefficients: </span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z-value Pr(&gt;|z|)  </span></span>
<span><span class="co">#&gt; price              -0.013419   0.012831 -1.0458  0.29563  </span></span>
<span><span class="co">#&gt; typeGala            0.034409   0.040596  0.8476  0.39666  </span></span>
<span><span class="co">#&gt; typeHoneycrisp      0.033001   0.040617  0.8125  0.41651  </span></span>
<span><span class="co">#&gt; freshnessAverage   -0.074567   0.040491 -1.8416  0.06554 .</span></span>
<span><span class="co">#&gt; freshnessExcellent -0.030416   0.040523 -0.7506  0.45290  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt;                                      </span></span>
<span><span class="co">#&gt; Log-Likelihood:         -5.929770e+03</span></span>
<span><span class="co">#&gt; Null Log-Likelihood:    -5.932506e+03</span></span>
<span><span class="co">#&gt; AIC:                     1.186954e+04</span></span>
<span><span class="co">#&gt; BIC:                     1.190251e+04</span></span>
<span><span class="co">#&gt; McFadden R2:             4.611921e-04</span></span>
<span><span class="co">#&gt; Adj McFadden R2:        -3.816220e-04</span></span>
<span><span class="co">#&gt; Number of Observations:  5.400000e+03</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pipe-it-all-together">Pipe it all together!<a class="anchor" aria-label="anchor" href="#pipe-it-all-together"></a>
</h2>
<p>One of the convenient features of how the package is written is that
the object generated in each step is used as the first argument to the
function for the next step. Thus, just like in the overall program
diagram, the functions can be piped together. For example, the
“pipeline” below uses the Base R pipe operator (<code>|&gt;</code>) to
generate profiles, generate a design, simulate choices according to a
prior utility model, conduct a power analysis, and then finally plot the
results:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span>  price     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">0.5</span><span class="op">)</span>, <span class="co"># $ per pound</span></span>
<span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Fuji'</span>, <span class="st">'Gala'</span>, <span class="st">'Honeycrisp'</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  n_resp   <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Number of respondents</span></span>
<span>  n_alts   <span class="op">=</span> <span class="fl">3</span>,   <span class="co"># Number of alternatives per question</span></span>
<span>  n_q      <span class="op">=</span> <span class="fl">6</span>    <span class="co"># Number of questions per respondent</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>    type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>    pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>    outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>    obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>    nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    n_q     <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
<div class="section level3">
<h3 id="comparing-multiple-designs">Comparing multiple designs<a class="anchor" aria-label="anchor" href="#comparing-multiple-designs"></a>
</h3>
<p>When evaluating multiple designs, it can be helpful to visually
compare their respective power curves. This can be done using the
<code><a href="../reference/plot_compare_power.html">plot_compare_power()</a></code> function. To use it, you have to first
create different designs and then simulate the power of each design by
simulating choices. Here is an example comparing a full factorial design
against a Bayesian D-efficient design:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make designs to compare: full factorial vs bayesian d-efficient</span></span>
<span><span class="va">design_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">300</span>, n_alts <span class="op">=</span> <span class="fl">3</span>, n_q <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Same priors will be used in bayesian design and simulated choices </span></span>
<span><span class="va">priors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> </span>
<span>  price     <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span>
<span>  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">design_bayesian</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span>  profiles  <span class="op">=</span> <span class="va">profiles</span>,</span>
<span>  n_resp <span class="op">=</span> <span class="fl">300</span>, n_alts <span class="op">=</span> <span class="fl">3</span>, n_q <span class="op">=</span> <span class="fl">6</span>, n_start <span class="op">=</span> <span class="fl">1</span>, method <span class="op">=</span> <span class="st">"CEA"</span>,</span>
<span>  priors <span class="op">=</span> <span class="va">priors</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Obtain power for each design by simulating choices</span></span>
<span><span class="va">power_full</span> <span class="op">&lt;-</span> <span class="va">design_full</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span>obsID <span class="op">=</span> <span class="st">"obsID"</span>, priors <span class="op">=</span> <span class="va">priors</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>    pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>    outcome <span class="op">=</span> <span class="st">"choice"</span>, obsID <span class="op">=</span> <span class="st">"obsID"</span>, nbreaks <span class="op">=</span> <span class="fl">10</span>, n_q <span class="op">=</span> <span class="fl">6</span>, n_cores <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">power_bayesian</span> <span class="op">&lt;-</span> <span class="va">design_bayesian</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cbc_choices.html">cbc_choices</a></span><span class="op">(</span>obsID <span class="op">=</span> <span class="st">"obsID"</span>, priors <span class="op">=</span> <span class="va">priors</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cbc_power.html">cbc_power</a></span><span class="op">(</span></span>
<span>    pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span>    outcome <span class="op">=</span> <span class="st">"choice"</span>, obsID <span class="op">=</span> <span class="st">"obsID"</span>, nbreaks <span class="op">=</span> <span class="fl">10</span>, n_q <span class="op">=</span> <span class="fl">6</span>, n_cores <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare power of each design</span></span>
<span><span class="fu"><a href="../reference/plot_compare_power.html">plot_compare_power</a></span><span class="op">(</span><span class="va">power_bayesian</span>, <span class="va">power_full</span><span class="op">)</span></span></code></pre></div>
<p><img src="usage_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Gromping2018" class="csl-entry">
Grömping, Ulrike. 2018. <span>“R Package DoE.base for Factorial
Experiments.”</span> <em>Journal of Statistical Software</em> 85 (5):
1–41. <a href="https://doi.org/10.18637/jss.v085.i05" class="external-link">https://doi.org/10.18637/jss.v085.i05</a>.
</div>
<div id="ref-Helveston2023" class="csl-entry">
Helveston, John Paul. 2023. <span>“Logitr: Fast Estimation of
Multinomial and Mixed Logit Models with Preference Space and
Willingness-to-Pay Space Utility Parameterizations.”</span> <em>Journal
of Statistical Software</em> 105 (10): 1–37. <a href="https://doi.org/10.18637/jss.v105.i10" class="external-link">https://doi.org/10.18637/jss.v105.i10</a>.
</div>
<div id="ref-Traets2020" class="csl-entry">
Traets, Frits, Daniel Gil Sanchez, and Martina Vandebroek. 2020.
<span>“Generating Optimal Designs for Discrete Choice Experiments in r:
The Idefix Package.”</span> <em>Journal of Statistical Software</em> 96
(3): 1–41. <a href="https://doi.org/10.18637/jss.v096.i03" class="external-link">https://doi.org/10.18637/jss.v096.i03</a>.
</div>
<div id="ref-Wheeler2022" class="csl-entry">
Wheeler, Bob. 2022. <em>AlgDesign: Algorithmic Experimental Design</em>.
<a href="https://CRAN.R-project.org/package=AlgDesign" class="external-link">https://CRAN.R-project.org/package=AlgDesign</a>.
</div>
<div id="ref-Wickham2014" class="csl-entry">
Wickham, Hadley. 2014. <span>“Tidy Data.”</span> <em>Journal of
Statistical Software</em> 59 (10): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10" class="external-link">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
<div id="ref-Wickham2016" class="csl-entry">
Wickham, Hadley, Winston Chang, and Maintainer Hadley Wickham. 2016.
<span>“Package <span>‘Ggplot2’</span>.”</span> <em>Create Elegant Data
Visualisations Using the Grammar of Graphics. Version</em> 2 (1): 1–189.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Helveston.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
