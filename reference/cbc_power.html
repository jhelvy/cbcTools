<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Estimate the same model on different size subsets of data — cbc_power • cbcTools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate the same model on different size subsets of data — cbc_power"><meta property="og:description" content="This function estimates the same model multiple times using different size
subsets of a set of choice data. The number of models to run is set by the
nbreaks argument, which breaks up the data into groups of increasing
sample sizes. All models are estimated models using the logitr package."><meta property="og:image" content="https://jhelvy.github.io/cbcTools/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cbcTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jhelvy/cbcTools" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate the same model on different size subsets of data</h1>
    <small class="dont-index">Source: <a href="https://github.com/jhelvy/cbcTools/blob/HEAD/R/power.R" class="external-link"><code>R/power.R</code></a></small>
    <div class="hidden name"><code>cbc_power.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function estimates the same model multiple times using different size
subsets of a set of choice data. The number of models to run is set by the
<code>nbreaks</code> argument, which breaks up the data into groups of increasing
sample sizes. All models are estimated models using the logitr package.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">cbc_power</span><span class="op">(</span>
  <span class="va">data</span>,
  <span class="va">outcome</span>,
  <span class="va">obsID</span>,
  <span class="va">pars</span>,
  randPars <span class="op">=</span> <span class="cn">NULL</span>,
  nbreaks <span class="op">=</span> <span class="fl">10</span>,
  n_q <span class="op">=</span> <span class="fl">1</span>,
  return_models <span class="op">=</span> <span class="cn">FALSE</span>,
  panelID <span class="op">=</span> <span class="cn">NULL</span>,
  clusterID <span class="op">=</span> <span class="cn">NULL</span>,
  robust <span class="op">=</span> <span class="cn">FALSE</span>,
  predict <span class="op">=</span> <span class="cn">FALSE</span>,
  n_cores <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>The data, formatted as a <code>data.frame</code> object.</p></dd>
<dt>outcome</dt>
<dd><p>The name of the column that identifies the outcome variable,
which should be coded with a <code>1</code> for <code>TRUE</code> and <code>0</code> for <code>FALSE</code>.</p></dd>
<dt>obsID</dt>
<dd><p>The name of the column that identifies each observation.</p></dd>
<dt>pars</dt>
<dd><p>The names of the parameters to be estimated in the model.
Must be the same as the column names in the <code>data</code> argument.</p></dd>
<dt>randPars</dt>
<dd><p>A named vector whose names are the random parameters and
values the distribution: <code>'n'</code> for normal or <code>'ln'</code> for log-normal.
Defaults to <code>NULL</code>.</p></dd>
<dt>nbreaks</dt>
<dd><p>The number of different sample size groups.</p></dd>
<dt>n_q</dt>
<dd><p>Number of questions per respondent. Defaults to <code>1</code> if not
specified.</p></dd>
<dt>return_models</dt>
<dd><p>If <code>TRUE</code>, a list of all estimated models is returned.
This can be useful if you want to extract other outputs from each model,
such as the variance-covariance matrix, etc. Defaults to <code>FALSE</code>.</p></dd>
<dt>panelID</dt>
<dd><p>The name of the column that identifies the individual (for
panel data where multiple observations are recorded for each individual).
Defaults to <code>NULL</code>.</p></dd>
<dt>clusterID</dt>
<dd><p>The name of the column that identifies the cluster
groups to be used in model estimation. Defaults to <code>NULL</code>.</p></dd>
<dt>robust</dt>
<dd><p>Determines whether or not a robust covariance matrix is
estimated. Defaults to <code>FALSE</code>. Specification of a <code>clusterID</code> will override
the user setting and set this to `TRUE' (a warning will be displayed in this
case). Replicates the functionality of Stata's cmcmmixlogit.</p></dd>
<dt>predict</dt>
<dd><p>If <code>TRUE</code>, predicted probabilities, fitted values, and
residuals are also included in the returned model objects. Defaults to
<code>FALSE</code>.</p></dd>
<dt>n_cores</dt>
<dd><p>The number of cores to use for parallel processing.
Set to <code>1</code> to run serially Defaults to <code>NULL</code>, in which case the number of
cores is set to <code>parallel::detectCores() - 1</code>. Max cores allowed is capped
at <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">parallel::detectCores()</a></code>.</p></dd>
<dt>...</dt>
<dd><p>Other arguments that are passed to <code><a href="https://rdrr.io/pkg/logitr/man/logitr.html" class="external-link">logitr::logitr()</a></code> for model
estimation. See the <code>logitr</code> documentation for details about other
available arguments.</p></dd>
</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhelvy/cbcTools" class="external-link">cbcTools</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># A simple conjoint experiment about apples</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Generate all possible profiles</span></span>
<span class="r-in"><span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="cbc_profiles.html">cbc_profiles</a></span><span class="op">(</span></span>
<span class="r-in">  price     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">2.5</span>, <span class="fl">3</span>, <span class="fl">3.5</span>, <span class="fl">4</span>, <span class="fl">4.5</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span class="r-in">  type      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fuji"</span>, <span class="st">"Gala"</span>, <span class="st">"Honeycrisp"</span><span class="op">)</span>,</span>
<span class="r-in">  freshness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Poor'</span>, <span class="st">'Average'</span>, <span class="st">'Excellent'</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Make a randomized survey design</span></span>
<span class="r-in"><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="cbc_design.html">cbc_design</a></span><span class="op">(</span></span>
<span class="r-in">  profiles <span class="op">=</span> <span class="va">profiles</span>,</span>
<span class="r-in">  n_resp   <span class="op">=</span> <span class="fl">300</span>, <span class="co"># Number of respondents</span></span>
<span class="r-in">  n_alts   <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of alternatives per question</span></span>
<span class="r-in">  n_q      <span class="op">=</span> <span class="fl">6</span> <span class="co"># Number of questions per respondent</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Simulate random choices</span></span>
<span class="r-in"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="cbc_choices.html">cbc_choices</a></span><span class="op">(</span></span>
<span class="r-in">  design <span class="op">=</span> <span class="va">design</span>,</span>
<span class="r-in">  obsID  <span class="op">=</span> <span class="st">"obsID"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Conduct a power analysis</span></span>
<span class="r-in"><span class="va">power</span> <span class="op">&lt;-</span> <span class="fu">cbc_power</span><span class="op">(</span></span>
<span class="r-in">  data    <span class="op">=</span> <span class="va">data</span>,</span>
<span class="r-in">  pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"type"</span>, <span class="st">"freshness"</span><span class="op">)</span>,</span>
<span class="r-in">  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span class="r-in">  obsID   <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span class="r-in">  nbreaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span class="r-in">  n_q     <span class="op">=</span> <span class="fl">6</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Estimating models using 2 cores...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done!</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by John Helveston.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

