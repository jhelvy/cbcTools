% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survey.R
\name{cbc_survey}
\alias{cbc_survey}
\alias{cbc_survey.cbc_profiles}
\alias{cbc_survey.cbc_design}
\title{Create a survey from profiles or design}
\usage{
cbc_survey(x, n_resp, ...)

\method{cbc_survey}{cbc_profiles}(
  x,
  n_resp,
  method = "random",
  n_alts,
  n_q,
  priors = NULL,
  randomize_questions = TRUE,
  randomize_alts = TRUE,
  ...
)

\method{cbc_survey}{cbc_design}(x, n_resp, randomize_questions = TRUE, randomize_alts = TRUE, ...)
}
\arguments{
\item{x}{Either a \code{cbc_profiles} object created by \code{cbc_profiles()}, or a
\code{cbc_design} object created by \code{cbc_design()}.}

\item{n_resp}{Number of survey respondents}

\item{...}{Additional arguments:
\itemize{
\item When \code{x} is profiles: passed to \code{cbc_design()} for design creation
\item When \code{x} is design: currently unused
}}

\item{method}{Choose the design method (only when \code{x} is profiles).
Options: \code{"sequential"} for D-efficient designs, or \code{"random"} for random surveys.
Defaults to \code{"random"}.}

\item{n_alts}{Number of alternatives per choice question (only when \code{x} is profiles).}

\item{n_q}{Number of questions per respondent (only when \code{x} is profiles).}

\item{priors}{A \code{cbc_priors} object (only when \code{x} is profiles for non-random methods).}

\item{randomize_questions}{Randomize question order for each respondent? Defaults to \code{TRUE}.}

\item{randomize_alts}{Randomize alternative order within questions? Defaults to \code{TRUE}.}
}
\value{
A data frame with class \code{cbc_survey} containing the complete survey design.
The underlying experimental design is stored as an attribute and can be
extracted using \code{cbc_extract_design()}.
}
\description{
This function creates a complete survey design either by:
\enumerate{
\item Taking profiles and creating both the experimental design and survey, or
\item Taking an existing design and replicating it across respondents
}
}
\details{
\strong{Two workflows supported:}

\strong{Workflow 1: Profiles → Survey (integrated)}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{survey <- cbc_survey(
  profiles,
  n_resp = 100,
  method = "sequential",
  n_alts = 3,
  n_q = 6,
  priors = priors
)
}\if{html}{\out{</div>}}

\strong{Workflow 2: Design → Survey (two-step)}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{design <- cbc_design(
  profiles,
  method = "sequential",
  n_alts = 3,
  n_q = 6,
  priors = priors
)
survey <- cbc_survey(design, n_resp = 100)
}\if{html}{\out{</div>}}

\strong{When to use each workflow:}
\itemize{
\item \strong{Integrated (Workflow 1)}: Most common use case, simplest for new users
\item \strong{Two-step (Workflow 2)}: When you want to inspect/modify the design before creating the survey,
or when using the design in external platforms
}
}
\examples{
# Create profiles
profiles <- cbc_profiles(
  price = c(1, 2, 3),
  type = c("A", "B", "C")
)

priors <- cbc_priors(
  profiles = profiles,
  price = -0.5,
  type = c(0.2, 0.3)
)

# Workflow 1: Integrated (profiles → survey)
survey1 <- cbc_survey(
  profiles,
  n_resp = 100,
  method = "sequential",
  n_alts = 2,
  n_q = 4,
  priors = priors
)

# Workflow 2: Two-step (design → survey)
design <- cbc_design(
  profiles,
  method = "sequential",
  n_alts = 2,
  n_q = 4,
  priors = priors
)
# Inspect design if needed: cbc_inspect_balance(design)
survey2 <- cbc_survey(design, n_resp = 100)

# Both surveys have extractable designs
design1 <- cbc_extract_design(survey1)
design2 <- cbc_extract_design(survey2)
}
